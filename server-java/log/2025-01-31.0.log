2025-01-31 05:09:34.945 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:09:35.015 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:09:35.215 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1906 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:09:35.216 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:09:35.535 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:09:35.535 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:09:35.541 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 05:09:35.542 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:09:35.542 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:09:35.652 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 9 JPA repository interfaces.
2025-01-31 05:09:35.909 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:09:35.910 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:09:35.914 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:09:35.987 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:09:36.100 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:09:36.101 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:09:36.114 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:09:36.126 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:09:36.239 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:09:36.299 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 616a1fa41bd21bbfc886976f07274ca82d91fd61570171e98ddae29aa3958343
2025-01-31 05:09:36.502 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.375369S
2025-01-31 05:09:36.506 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:09:36.506 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:09:36.506 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:09:36.508 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:09:36.554 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7a8037649ff7f56c2f49c5702f09028a989df6536e9d2e167dd7a93d2956f7c4
2025-01-31 05:09:36.692 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49651/hhplus using query 'SELECT 1'
2025-01-31 05:09:43.613 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.105324S
2025-01-31 05:09:43.614 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49651/hhplus)
2025-01-31 05:09:43.860 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:09:43.888 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:09:43.903 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:09:44.018 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:09:44.030 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:09:44.113 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@7bca98d5
2025-01-31 05:09:44.114 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:09:44.129 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:09:44.130 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:09:44.139 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:09:44.529 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:09:44.638 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:09:44.794 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:09:45.114 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:09:45.131 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:09:45.200 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:09:45.205 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:09:45.590 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:09:45.870 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:09:45.870 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:09:45.874 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:09:45.880 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 10 ms
2025-01-31 05:09:45.960 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.893 seconds (process running for 11.467)
2025-01-31 05:09:48.910 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:09:48.913 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:09:48.922 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 05:13:08.317 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:13:08.394 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:13:08.589 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2009 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:13:08.589 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:13:08.905 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:13:08.905 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:13:08.911 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 05:13:08.912 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:13:08.912 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:13:09.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 112 ms. Found 9 JPA repository interfaces.
2025-01-31 05:13:09.288 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:13:09.289 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:13:09.292 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:13:09.370 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:13:09.487 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:13:09.488 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:13:09.505 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:13:09.516 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:13:09.607 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:13:09.663 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: dc7bf6a3faf9078722c07089095adcdf4e23a3d6fd96477079188b8e1b892194
2025-01-31 05:13:09.861 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.345305S
2025-01-31 05:13:09.866 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:13:09.866 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:13:09.866 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:13:09.867 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:13:09.905 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 20b69d3df96f8c9b857d43eaf305a1830c83c0b0da9500b22aa5bd5c2bb6f062
2025-01-31 05:13:10.094 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49739/hhplus using query 'SELECT 1'
2025-01-31 05:13:17.032 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.164339S
2025-01-31 05:13:17.032 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49739/hhplus)
2025-01-31 05:13:17.287 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:13:17.314 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:13:17.328 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:13:17.444 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:13:17.458 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:13:17.532 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@318beab4
2025-01-31 05:13:17.533 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:13:17.554 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:13:17.555 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:13:17.566 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:13:17.963 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:13:18.074 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:13:18.219 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:13:18.544 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:13:18.558 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:13:18.624 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:13:18.631 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:13:19.029 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:13:19.324 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:13:19.324 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:13:19.328 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:13:19.335 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 05:13:19.415 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.968 seconds (process running for 11.55)
2025-01-31 05:13:22.359 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:13:22.363 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:13:22.371 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 05:15:01.377 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:15:01.448 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:15:01.635 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2080 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:15:01.636 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:15:01.945 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:15:01.945 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:15:01.951 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 05:15:01.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:15:01.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:15:02.060 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 107 ms. Found 9 JPA repository interfaces.
2025-01-31 05:15:02.301 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:15:02.302 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:15:02.305 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:15:02.377 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:15:02.485 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:15:02.486 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:15:02.498 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:15:02.509 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:15:02.616 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:15:02.694 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: a14d534ce7dcdec0fbca6705e6ee38e869c776f9f17d2808b73a26964a363fc4
2025-01-31 05:15:02.868 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.358351S
2025-01-31 05:15:02.870 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:15:02.871 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:15:02.871 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:15:02.873 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:15:02.915 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 2ba0cf6ebbadb7e46ea27e8a0086719d7f52458b3fcaac1cb66bd7bd78211678
2025-01-31 05:15:03.080 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49826/hhplus using query 'SELECT 1'
2025-01-31 05:15:09.795 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.922523S
2025-01-31 05:15:09.795 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49826/hhplus)
2025-01-31 05:15:10.043 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:15:10.072 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:15:10.089 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:15:10.215 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:15:10.229 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:15:10.308 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@498cf1dc
2025-01-31 05:15:10.309 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:15:10.327 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:15:10.328 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:15:10.337 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:15:10.741 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:15:10.863 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:15:11.031 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:15:11.343 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:15:11.360 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:15:11.438 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:15:11.442 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:15:11.855 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:15:12.181 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:15:12.182 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:15:12.186 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:15:12.193 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 05:15:12.279 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.777 seconds (process running for 11.366)
2025-01-31 05:15:15.370 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:15:15.375 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:15:15.381 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 05:23:10.815 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:23:10.884 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:23:11.071 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2197 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:23:11.071 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:23:11.381 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:23:11.381 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:23:11.387 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 05:23:11.387 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:23:11.388 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:23:11.497 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 108 ms. Found 9 JPA repository interfaces.
2025-01-31 05:23:11.755 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:23:11.756 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:23:11.759 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:23:11.834 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:23:11.948 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:23:11.949 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:23:11.962 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:23:11.973 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:23:12.073 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:23:12.137 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 254dee59ba420082896595023086bcedc929a056dd81fbbe79fcc2d5bad48fa3
2025-01-31 05:23:12.338 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.365317S
2025-01-31 05:23:12.342 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:23:12.342 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:23:12.342 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:23:12.344 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:23:12.386 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: f21dd21c85efa2e8ca71b762a282249110918f5914e0ae1d571890a0281361b2
2025-01-31 05:23:12.541 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49919/hhplus using query 'SELECT 1'
2025-01-31 05:23:19.427 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.08353S
2025-01-31 05:23:19.428 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49919/hhplus)
2025-01-31 05:23:19.670 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:23:19.697 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:23:19.712 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:23:19.825 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:23:19.837 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:23:19.912 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@45ea6c24
2025-01-31 05:23:19.913 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:23:19.932 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:23:19.932 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:23:19.943 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:23:20.329 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:23:20.442 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:23:20.578 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:23:20.906 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:23:20.919 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:23:20.981 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:23:20.986 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:23:21.386 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:23:21.678 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:23:21.678 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:23:21.682 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:23:21.689 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 05:23:21.765 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.83 seconds (process running for 11.394)
2025-01-31 05:23:24.697 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:23:24.700 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:23:24.704 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 05:34:03.019 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:34:03.091 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:34:03.286 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2329 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:34:03.287 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:34:03.601 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:34:03.602 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:34:03.607 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 05:34:03.608 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:34:03.609 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:34:03.716 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 9 JPA repository interfaces.
2025-01-31 05:34:03.956 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:34:03.957 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:34:03.960 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:34:04.034 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:34:04.152 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:34:04.153 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:34:04.165 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:34:04.175 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:34:04.287 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:34:04.355 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: fcdbfbd4e05dc8587a780d61984f37d32efaf53489b2c03303421181ef0127a0
2025-01-31 05:34:04.558 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.383061S
2025-01-31 05:34:04.561 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:34:04.561 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:34:04.561 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:34:04.562 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:34:04.604 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 28576380c48ff30c203d00f927bc5b03f288fd0201a385cfed85d4138f86eac2
2025-01-31 05:34:04.777 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50023/hhplus using query 'SELECT 1'
2025-01-31 05:34:11.613 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.050616S
2025-01-31 05:34:11.613 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50023/hhplus)
2025-01-31 05:34:11.868 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:34:11.897 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:34:11.914 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:34:12.040 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:34:12.054 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:34:12.134 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@79a88f45
2025-01-31 05:34:12.135 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:34:12.152 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:34:12.153 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:34:12.163 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:34:12.568 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:34:12.687 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:34:12.839 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:34:13.178 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:34:13.192 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:34:13.262 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:34:13.267 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:34:13.686 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:34:13.997 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:34:13.997 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:34:14.001 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:34:14.008 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 05:34:14.097 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.951 seconds (process running for 11.533)
2025-01-31 05:34:17.117 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:34:17.121 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:34:17.127 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 05:47:39.824 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 05:47:39.900 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 05:47:40.094 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2456 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 05:47:40.094 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 05:47:40.438 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:47:40.438 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:47:40.446 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 05:47:40.447 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 05:47:40.447 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 05:47:40.565 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 117 ms. Found 9 JPA repository interfaces.
2025-01-31 05:47:40.840 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 05:47:40.841 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 05:47:40.845 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 05:47:40.924 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 05:47:41.045 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 05:47:41.046 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 05:47:41.061 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 05:47:41.072 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 05:47:41.188 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 05:47:41.245 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: c57920c2c699a6e7baaa3ef89ad0f3d0d15b40842954e335d75c4e8ea82c675d
2025-01-31 05:47:41.455 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.382926S
2025-01-31 05:47:41.458 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 05:47:41.458 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 05:47:41.458 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 05:47:41.460 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 05:47:41.503 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 5d87ba7f6ef1047e87587284557b861b800d92e4a415d50c8f9adfe7245d94b1
2025-01-31 05:47:41.676 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50119/hhplus using query 'SELECT 1'
2025-01-31 05:47:48.664 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.203905S
2025-01-31 05:47:48.665 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50119/hhplus)
2025-01-31 05:47:48.945 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 05:47:48.974 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 05:47:48.991 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 05:47:49.134 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 05:47:49.150 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 05:47:49.249 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@56f4f385
2025-01-31 05:47:49.250 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 05:47:49.268 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 05:47:49.269 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 05:47:49.280 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 05:47:49.717 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 05:47:49.838 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:47:49.984 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 05:47:50.334 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 05:47:50.348 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 05:47:50.418 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:47:50.424 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 05:47:50.831 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 05:47:51.135 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 05:47:51.135 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 05:47:51.140 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 05:47:51.146 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 05:47:51.226 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.271 seconds (process running for 11.857)
2025-01-31 05:47:54.241 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 05:47:54.246 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 05:47:54.252 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 06:00:51.143 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 06:00:51.214 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 06:00:51.406 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2621 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 06:00:51.406 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 06:00:51.714 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:00:51.714 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:00:51.720 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 06:00:51.721 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:00:51.721 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:00:51.829 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 107 ms. Found 9 JPA repository interfaces.
2025-01-31 06:00:52.073 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 06:00:52.074 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 06:00:52.077 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 06:00:52.147 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 06:00:52.255 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 06:00:52.256 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 06:00:52.269 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 06:00:52.279 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 06:00:52.387 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 06:00:52.442 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: e4b4b8ed993a4dc24ab5bb671320c6c8fe438b1b2f84602788e1fd8a8442dd0b
2025-01-31 06:00:52.640 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.361289S
2025-01-31 06:00:52.643 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 06:00:52.643 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 06:00:52.643 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 06:00:52.645 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 06:00:52.682 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 2d099ffea4fe7cff6a888d1932790772742e44f07ce97a969b8503f9cc8cadd0
2025-01-31 06:00:52.851 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50213/hhplus using query 'SELECT 1'
2025-01-31 06:00:59.839 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.194357S
2025-01-31 06:00:59.840 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50213/hhplus)
2025-01-31 06:01:00.080 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 06:01:00.108 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 06:01:00.122 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 06:01:00.237 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 06:01:00.249 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 06:01:00.327 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@7976d382
2025-01-31 06:01:00.328 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 06:01:00.346 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 06:01:00.347 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 06:01:00.357 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 06:01:00.738 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 06:01:00.854 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:01:01.010 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 06:01:01.301 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-01-31 06:01:01.313 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 06:01:01.377 [redisson-netty-2-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:6379
2025-01-31 06:01:01.381 [redisson-netty-2-14]  INFO org.redisson.connection.pool.MasterConnectionPool - 5 connections initialized for localhost/127.0.0.1:6379
2025-01-31 06:01:01.783 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 06:01:02.076 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 06:01:02.076 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 06:01:02.081 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 06:01:02.090 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-01-31 06:01:02.171 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.903 seconds (process running for 11.467)
2025-01-31 06:01:05.148 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:01:05.150 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 06:01:05.153 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 06:31:23.851 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 06:31:23.919 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 06:31:24.112 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 3078 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 06:31:24.113 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 06:31:24.430 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:31:24.431 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:31:24.436 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 06:31:24.437 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:31:24.437 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:31:24.552 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 9 JPA repository interfaces.
2025-01-31 06:31:24.802 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 06:31:24.805 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 06:31:24.808 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 06:31:24.885 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 06:31:25.003 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 06:31:25.003 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 06:31:25.018 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 06:31:25.029 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 06:31:25.143 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 06:31:25.202 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: ae0626592b4315c08199e9aa2b958e53a0b29d9bb4f6cf052e1d810f0e67d56f
2025-01-31 06:31:25.423 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.394766S
2025-01-31 06:31:25.427 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 06:31:25.427 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 06:31:25.427 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 06:31:25.429 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 06:31:25.471 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 9d634b8192a902313920985c5af23821c83682aa1ffcdbaf305f63ba5210cefb
2025-01-31 06:31:25.591 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50378/hhplus using query 'SELECT 1'
2025-01-31 06:31:32.448 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.018884S
2025-01-31 06:31:32.448 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50378/hhplus)
2025-01-31 06:31:32.700 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 06:31:32.727 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 06:31:32.741 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 06:31:32.859 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 06:31:32.871 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 06:31:32.952 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@67544105
2025-01-31 06:31:32.953 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 06:31:32.977 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 06:31:32.977 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 06:31:32.985 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 06:31:33.377 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 06:31:33.488 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:31:33.655 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 06:31:33.893 [Test worker]  WARN org.springframework.web.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-01-31 06:31:34.026 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:31:34.028 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 06:31:34.031 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 06:31:34.063 [Test worker]  INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-01-31 06:31:34.097 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in kr.hhplus.be.server.common.util.RedisLockUtil required a bean of type 'org.springframework.data.redis.core.StringRedisTemplate' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.data.redis.core.StringRedisTemplate' in your configuration.

2025-01-31 06:31:34.100 [Test worker]  WARN org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [kr.hhplus.be.server.integration.CouponUseCaseTest@22448db4]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@745b4ed4 testClass = kr.hhplus.be.server.integration.CouponUseCaseTest, locations = [], classes = [kr.hhplus.be.server.ServerApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@7249dadf, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6e33c391, [ImportsContextCustomizer@250b6762 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@58a55449, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3c291aad, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@62c5bbdc, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@160c3ec1, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@3c321bdb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@df1d9e44], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 89 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:2144)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1594)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 128 common frames omitted
2025-01-31 06:33:05.677 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 06:33:05.747 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 06:33:05.941 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 3120 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 06:33:05.941 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 06:33:06.256 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:33:06.257 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:33:06.263 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 06:33:06.264 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:33:06.264 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:33:06.375 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 9 JPA repository interfaces.
2025-01-31 06:33:06.615 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 06:33:06.616 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 06:33:06.619 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 06:33:06.689 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 06:33:06.799 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 06:33:06.800 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 06:33:06.812 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 06:33:06.823 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 06:33:06.937 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 06:33:07.002 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 9a84e1db69178ba1322e1ae8560f72a40fc249ad1fbeccc9ce765fede99ff3ce
2025-01-31 06:33:07.178 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.355088S
2025-01-31 06:33:07.181 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 06:33:07.181 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 06:33:07.181 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 06:33:07.183 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 06:33:07.225 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: aba201444196b41edce6197d350d6ec2804caf2c759e98eed54d9750d01d73d8
2025-01-31 06:33:07.415 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50455/hhplus using query 'SELECT 1'
2025-01-31 06:33:14.472 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.289335S
2025-01-31 06:33:14.473 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50455/hhplus)
2025-01-31 06:33:14.762 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 06:33:14.792 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 06:33:14.809 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 06:33:14.934 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 06:33:14.950 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 06:33:15.033 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@45ea6c24
2025-01-31 06:33:15.034 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 06:33:15.051 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 06:33:15.052 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 06:33:15.064 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 06:33:15.502 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 06:33:15.625 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:33:15.813 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 06:33:16.049 [Test worker]  WARN org.springframework.web.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-01-31 06:33:16.203 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:33:16.206 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 06:33:16.208 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 06:33:16.249 [Test worker]  INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-01-31 06:33:16.276 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in kr.hhplus.be.server.common.util.RedisLockUtil required a bean of type 'org.springframework.data.redis.core.StringRedisTemplate' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.data.redis.core.StringRedisTemplate' in your configuration.

2025-01-31 06:33:16.283 [Test worker]  WARN org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [kr.hhplus.be.server.integration.CouponUseCaseTest@29323270]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@30df67b8 testClass = kr.hhplus.be.server.integration.CouponUseCaseTest, locations = [], classes = [kr.hhplus.be.server.ServerApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@7249dadf, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6e33c391, [ImportsContextCustomizer@58d8059b key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@58a55449, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3c291aad, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@62c5bbdc, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@160c3ec1, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@3c321bdb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@df1d9e44], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 89 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.data.redis.core.StringRedisTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:2144)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1594)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 128 common frames omitted
2025-01-31 06:36:36.241 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 06:36:36.310 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 06:36:36.499 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 3233 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 06:36:36.499 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 06:36:36.812 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:36:36.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:36:36.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 06:36:36.819 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:36:36.819 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:36:36.927 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 9 JPA repository interfaces.
2025-01-31 06:36:37.107 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:36:37.108 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.119 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.119 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.119 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:36:37.119 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-01-31 06:36:37.202 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 06:36:37.203 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 06:36:37.206 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 06:36:37.278 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 06:36:37.393 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 06:36:37.393 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 06:36:37.408 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 06:36:37.419 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 06:36:37.534 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 06:36:37.602 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 03f127a82d9a827bc3f0737ee981dbdef958709ff207def6dbd86037a5dbb5d8
2025-01-31 06:36:37.812 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.39296S
2025-01-31 06:36:37.815 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 06:36:37.815 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 06:36:37.815 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 06:36:37.817 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 06:36:37.858 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: dc2b1663d876a785a993e227d0cb80c4d3771a46b8bc52bd96764c3b9346390d
2025-01-31 06:36:38.026 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50536/hhplus using query 'SELECT 1'
2025-01-31 06:36:44.919 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.101975S
2025-01-31 06:36:44.919 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50536/hhplus)
2025-01-31 06:36:45.176 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 06:36:45.208 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 06:36:45.225 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 06:36:45.344 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 06:36:45.359 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 06:36:45.434 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d224921
2025-01-31 06:36:45.435 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 06:36:45.454 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 06:36:45.454 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 06:36:45.464 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 06:36:45.886 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 06:36:46.004 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:36:46.164 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 06:36:46.385 [Test worker]  WARN org.springframework.web.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
2025-01-31 06:36:46.541 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:36:46.543 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 06:36:46.546 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 06:36:46.578 [Test worker]  INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-01-31 06:36:46.595 [Test worker] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 128 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 142 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 155 common frames omitted
Caused by: java.lang.NoClassDefFoundError: io/lettuce/core/AbstractRedisClient
	at kr.hhplus.be.server.common.util.RedisConfig.redisConnectionFactory(RedisConfig.java:14)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$0.CGLIB$redisConnectionFactory$0(<generated>)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$0.redisConnectionFactory(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 158 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.lettuce.core.AbstractRedisClient
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	... 169 common frames omitted
2025-01-31 06:36:46.605 [Test worker]  WARN org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [kr.hhplus.be.server.integration.CouponUseCaseTest@49f4792a]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@44f2d195 testClass = kr.hhplus.be.server.integration.CouponUseCaseTest, locations = [], classes = [kr.hhplus.be.server.ServerApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@7249dadf, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6e33c391, [ImportsContextCustomizer@778bdf42 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@58a55449, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3c291aad, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@62c5bbdc, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@160c3ec1, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@3c321bdb, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@df1d9e44], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'couponUseCase' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/apps/coupon/application/usecase/CouponUseCase.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 89 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redisLockUtil' defined in file [/Users/seongdo/Desktop/hhplus_week3/server-java/build/classes/java/main/kr/hhplus/be/server/common/util/RedisLockUtil.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1377)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1214)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 115 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'stringRedisTemplate' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Unsatisfied dependency expressed through method 'stringRedisTemplate' parameter 0: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 128 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redisConnectionFactory' defined in class path resource [kr/hhplus/be/server/common/util/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:489)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1357)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:289)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1573)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1519)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 142 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.redis.connection.RedisConnectionFactory]: Factory method 'redisConnectionFactory' threw exception with message: io/lettuce/core/AbstractRedisClient
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 155 common frames omitted
Caused by: java.lang.NoClassDefFoundError: io/lettuce/core/AbstractRedisClient
	at kr.hhplus.be.server.common.util.RedisConfig.redisConnectionFactory(RedisConfig.java:14)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$0.CGLIB$redisConnectionFactory$0(<generated>)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348)
	at kr.hhplus.be.server.common.util.RedisConfig$$SpringCGLIB$$0.redisConnectionFactory(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 158 common frames omitted
Caused by: java.lang.ClassNotFoundException: io.lettuce.core.AbstractRedisClient
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	... 169 common frames omitted
2025-01-31 06:48:46.420 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 06:48:46.487 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 06:48:46.678 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 3631 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 06:48:46.679 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 06:48:46.981 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:48:46.982 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:48:46.987 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 06:48:46.988 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:48:46.988 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 06:48:47.059 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 9 JPA repository interfaces.
2025-01-31 06:48:47.237 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 06:48:47.238 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 06:48:47.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 06:48:47.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-01-31 06:48:47.329 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 06:48:47.331 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 06:48:47.334 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 06:48:47.407 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 06:48:47.525 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 06:48:47.525 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 06:48:47.534 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 06:48:47.546 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 06:48:47.655 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 06:48:47.717 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 5dffa2824b870f97cadb8e925fbd1a550b7d2f4b7442af312d40285205eef198
2025-01-31 06:48:47.945 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.398975S
2025-01-31 06:48:47.947 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 06:48:47.948 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 06:48:47.948 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 06:48:47.949 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 06:48:47.989 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 00ca58abd7890e09f5e98d05abfab598e724deb24dbc29d9de4da6410c07872a
2025-01-31 06:48:48.117 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50642/hhplus using query 'SELECT 1'
2025-01-31 06:48:55.174 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.225086S
2025-01-31 06:48:55.175 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50642/hhplus)
2025-01-31 06:48:55.428 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 06:48:55.454 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 06:48:55.468 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 06:48:55.583 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 06:48:55.596 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 06:48:55.678 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@fefd4a2
2025-01-31 06:48:55.679 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 06:48:55.696 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 06:48:55.696 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 06:48:55.705 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 06:48:56.096 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 06:48:56.209 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:48:56.372 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 06:48:56.664 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 06:48:57.130 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 06:48:57.478 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 06:48:57.479 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 06:48:57.483 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 06:48:57.491 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-01-31 06:48:57.597 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.057 seconds (process running for 11.61)
2025-01-31 06:49:00.682 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 06:49:00.684 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 06:49:00.687 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 07:08:55.042 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 07:08:55.112 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 07:08:55.306 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 4061 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 07:08:55.306 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 07:08:55.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 07:08:55.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 07:08:55.621 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 07:08:55.622 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 07:08:55.622 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 07:08:55.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 9 JPA repository interfaces.
2025-01-31 07:08:55.879 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 07:08:55.880 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 07:08:55.894 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.894 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.894 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.894 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.894 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.895 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.895 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.895 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.895 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 07:08:55.895 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-01-31 07:08:55.971 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 07:08:55.972 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 07:08:55.975 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 07:08:56.046 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 07:08:56.170 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 07:08:56.170 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 07:08:56.182 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 07:08:56.198 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 07:08:56.309 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 07:08:56.375 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: b16619340f0eaf7e966439bbae1f0593f00a04ec4bf89152ba57387eb3a1b523
2025-01-31 07:08:56.589 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.391181S
2025-01-31 07:08:56.592 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 07:08:56.592 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 07:08:56.593 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 07:08:56.594 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 07:08:56.637 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 60b55b39e795b2f9ed159109ed477a9478a5783864a4513b4b0637f390eb2af0
2025-01-31 07:08:56.825 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50741/hhplus using query 'SELECT 1'
2025-01-31 07:09:03.804 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.210022S
2025-01-31 07:09:03.805 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50741/hhplus)
2025-01-31 07:09:04.059 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 07:09:04.086 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 07:09:04.104 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 07:09:04.220 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 07:09:04.233 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 07:09:04.308 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d2693f
2025-01-31 07:09:04.309 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 07:09:04.327 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 07:09:04.328 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 07:09:04.336 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 07:09:04.729 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 07:09:04.842 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 07:09:05.010 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 07:09:05.312 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 07:09:05.780 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 07:09:06.101 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 07:09:06.102 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 07:09:06.106 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 07:09:06.113 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 07:09:06.201 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.036 seconds (process running for 11.603)
2025-01-31 07:09:09.535 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 07:09:09.537 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 07:09:09.540 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:26:16.230 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:26:16.302 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:26:16.493 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 4967 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:26:16.494 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:26:16.798 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:26:16.798 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:26:16.804 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:26:16.805 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:26:16.805 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:26:16.877 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 9 JPA repository interfaces.
2025-01-31 08:26:17.059 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:26:17.060 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:26:17.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-01-31 08:26:17.150 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:26:17.151 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:26:17.154 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:26:17.225 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:26:17.335 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:26:17.336 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:26:17.350 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:26:17.361 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:26:17.469 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:26:17.535 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 0444fd3a0c90c3658dcb51d7a4d668be3ca4841a76c1a5b5334e55b98a9826a3
2025-01-31 08:26:17.751 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.390101S
2025-01-31 08:26:17.754 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:26:17.754 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:26:17.754 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:26:17.756 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:26:17.795 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: d4f7b51b17b76e6d1ba2d2093dd3cff26a4765b517a95ab5de81221183104b0c
2025-01-31 08:26:17.978 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50875/hhplus using query 'SELECT 1'
2025-01-31 08:26:24.865 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.108761S
2025-01-31 08:26:24.865 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50875/hhplus)
2025-01-31 08:26:25.105 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:26:25.131 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:26:25.146 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:26:25.255 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:26:25.268 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:26:25.344 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ebcfcf1
2025-01-31 08:26:25.345 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:26:25.364 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:26:25.364 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:26:25.373 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:26:25.760 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:26:25.877 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:26:26.016 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:26:26.327 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:26:26.785 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:26:27.105 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:26:27.105 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:26:27.109 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:26:27.116 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 08:26:27.209 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.855 seconds (process running for 11.439)
2025-01-31 08:26:33.317 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:26:33.320 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:26:33.325 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:31:16.047 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:31:16.123 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:31:16.318 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5112 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:31:16.318 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:31:16.622 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:16.622 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:31:16.628 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:31:16.629 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:16.630 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:31:16.699 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 9 JPA repository interfaces.
2025-01-31 08:31:16.910 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:16.910 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:31:16.922 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.922 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.922 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.922 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.922 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.923 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.923 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.923 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.923 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:16.923 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-01-31 08:31:17.000 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:31:17.002 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:31:17.005 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:31:17.079 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:31:17.190 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:31:17.191 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:31:17.202 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:31:17.212 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:31:17.318 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:31:17.381 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: b863c84a28686b8ae8f53ce5125c678af268c5ca11f33b703a6f8e4f691dd27f
2025-01-31 08:31:17.611 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.399396S
2025-01-31 08:31:17.614 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:31:17.614 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:31:17.614 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:31:17.616 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:31:17.662 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 57c423e167e0ac9521c7ba84970e7b93ecffd600f007299403b2a6ba2c61e926
2025-01-31 08:31:17.845 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50957/hhplus using query 'SELECT 1'
2025-01-31 08:31:24.885 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.268827S
2025-01-31 08:31:24.885 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50957/hhplus)
2025-01-31 08:31:25.127 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:31:25.156 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:31:25.172 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:31:25.282 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:31:25.295 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:31:25.372 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@50f5ce5b
2025-01-31 08:31:25.372 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:31:25.388 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:31:25.389 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:31:25.397 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:31:25.775 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:31:25.882 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:31:26.018 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:31:26.341 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:31:26.803 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:31:27.133 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:31:27.133 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:31:27.136 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:31:27.144 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 08:31:27.239 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.059 seconds (process running for 11.64)
2025-01-31 08:31:30.544 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:31:30.546 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:31:30.549 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:31:48.302 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:31:48.370 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:31:48.563 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5140 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:31:48.564 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:31:48.878 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:48.878 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:31:48.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:31:48.885 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:48.885 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:31:48.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 9 JPA repository interfaces.
2025-01-31 08:31:49.134 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:31:49.135 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:31:49.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:31:49.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-01-31 08:31:49.226 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:31:49.227 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:31:49.230 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:31:49.303 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:31:49.408 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:31:49.409 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:31:49.420 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:31:49.430 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:31:49.535 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:31:49.588 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 809d7767da6f60d449e178bf4186b5cb17dc0b389bf5a4205d74123c0eca3d31
2025-01-31 08:31:49.755 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.325521S
2025-01-31 08:31:49.758 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:31:49.759 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:31:49.759 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:31:49.760 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:31:49.798 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 1f0285bac3e45962bd954c53a7bba8ddea62315afa7afba10014459f98e4b5ff
2025-01-31 08:31:49.964 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51037/hhplus using query 'SELECT 1'
2025-01-31 08:31:56.833 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.072932S
2025-01-31 08:31:56.834 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51037/hhplus)
2025-01-31 08:31:57.082 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:31:57.111 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:31:57.125 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:31:57.235 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:31:57.248 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:31:57.319 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@47a68e3f
2025-01-31 08:31:57.320 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:31:57.337 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:31:57.337 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:31:57.346 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:31:57.730 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:31:57.855 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:31:58.022 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:31:58.311 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:31:58.771 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:31:59.127 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:31:59.127 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:31:59.131 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:31:59.137 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 10 ms
2025-01-31 08:31:59.231 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.808 seconds (process running for 11.401)
2025-01-31 08:32:02.524 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:32:02.527 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:32:02.532 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:32:54.125 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:32:54.195 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:32:54.385 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5186 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:32:54.386 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:32:54.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:32:54.686 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:32:54.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:32:54.692 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:32:54.692 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:32:54.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 9 JPA repository interfaces.
2025-01-31 08:32:54.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:32:54.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:32:54.964 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.964 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.964 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.964 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:32:54.965 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-01-31 08:32:55.041 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:32:55.042 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:32:55.046 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:32:55.118 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:32:55.228 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:32:55.231 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:32:55.245 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:32:55.257 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:32:55.366 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:32:55.424 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 299d93448c102feff7d2b052b79b2ee7854f75cc8ec5c8351b366883629ec0dd
2025-01-31 08:32:55.628 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.37069S
2025-01-31 08:32:55.631 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:32:55.632 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:32:55.632 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:32:55.634 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:32:55.677 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 4c536315606f4326f260ba16051a86f528de5decd295a5ff7d7595f01c30b12f
2025-01-31 08:32:55.845 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51116/hhplus using query 'SELECT 1'
2025-01-31 08:33:02.757 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.123405S
2025-01-31 08:33:02.757 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51116/hhplus)
2025-01-31 08:33:03.017 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:33:03.043 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:33:03.059 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:33:03.177 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:33:03.191 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:33:03.266 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ebcfcf1
2025-01-31 08:33:03.267 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:33:03.283 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:33:03.283 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:33:03.292 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:33:03.677 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:33:03.793 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:33:03.934 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:33:04.294 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:33:04.815 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:33:05.157 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:33:05.158 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:33:05.161 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:33:05.170 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-01-31 08:33:05.279 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.033 seconds (process running for 11.599)
2025-01-31 08:33:09.286 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:33:09.290 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:33:09.294 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:42:52.777 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:42:52.846 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:42:53.038 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5359 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:42:53.039 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:42:53.347 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:42:53.347 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:42:53.353 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 08:42:53.354 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:42:53.354 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:42:53.424 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 9 JPA repository interfaces.
2025-01-31 08:42:53.602 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:42:53.602 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:42:53.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-01-31 08:42:53.693 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:42:53.694 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:42:53.697 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:42:53.770 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:42:53.884 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:42:53.884 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:42:53.898 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:42:53.908 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:42:54.009 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:42:54.083 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 9ac2afb0d43921a9fbbf54bd5f7e8d435e9ab2a7db759d0bf25c886bbd12336f
2025-01-31 08:42:54.280 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.372047S
2025-01-31 08:42:54.285 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:42:54.285 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:42:54.285 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:42:54.286 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:42:54.325 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 4aafc8e2acef9e48b73399e2eefb7c7ebdb35d8c9e8fde6b86431c72e86a9eef
2025-01-31 08:42:54.510 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51207/hhplus using query 'SELECT 1'
2025-01-31 08:43:01.490 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.203579S
2025-01-31 08:43:01.490 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51207/hhplus)
2025-01-31 08:43:01.735 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:43:01.761 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:43:01.780 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:43:01.894 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:43:01.906 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:43:01.982 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@38aed8ad
2025-01-31 08:43:01.983 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:43:02.001 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:43:02.001 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:43:02.010 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:43:02.397 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:43:02.506 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:43:02.640 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:43:02.968 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:43:03.427 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:43:03.761 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:43:03.761 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:43:03.765 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:43:03.772 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 08:43:03.855 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.954 seconds (process running for 11.534)
2025-01-31 08:43:07.354 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:43:07.357 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:43:07.361 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:47:04.738 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:47:04.809 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:47:05.001 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5428 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:47:05.002 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:47:05.330 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:47:05.330 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:47:05.337 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 08:47:05.338 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:47:05.338 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:47:05.416 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 9 JPA repository interfaces.
2025-01-31 08:47:05.609 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:47:05.610 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:47:05.623 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.623 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.623 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.624 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.624 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.625 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.625 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.625 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.625 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:47:05.625 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-01-31 08:47:05.703 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:47:05.705 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:47:05.708 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:47:05.782 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:47:05.892 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:47:05.893 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:47:05.905 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:47:05.914 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:47:06.024 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:47:06.079 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f7c67d3e6ddd751b251fc6bb11ae474176227048ae69537b1a98894e0f1f7f86
2025-01-31 08:47:06.289 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.374721S
2025-01-31 08:47:06.292 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:47:06.292 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:47:06.292 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:47:06.294 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:47:06.336 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 71cdbdafd03c619f6f92ee8a2e1fae968c389cc926cdae9f7fcb344423e92a61
2025-01-31 08:47:06.508 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51295/hhplus using query 'SELECT 1'
2025-01-31 08:47:13.607 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.312234S
2025-01-31 08:47:13.607 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51295/hhplus)
2025-01-31 08:47:13.851 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:47:13.873 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:47:13.886 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:47:13.995 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:47:14.007 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:47:14.083 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@31aee6d9
2025-01-31 08:47:14.084 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:47:14.102 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:47:14.102 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:47:14.111 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:47:14.492 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:47:14.611 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:47:14.771 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:47:15.065 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:47:15.538 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:47:15.879 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:47:15.879 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:47:15.883 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:47:15.891 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-01-31 08:47:15.975 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.114 seconds (process running for 11.7)
2025-01-31 08:47:19.487 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:47:19.489 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:47:19.493 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:48:05.275 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:48:05.344 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:48:05.534 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5450 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:48:05.535 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:48:05.840 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:48:05.841 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:48:05.846 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:48:05.847 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:48:05.847 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:48:05.916 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 9 JPA repository interfaces.
2025-01-31 08:48:06.098 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:48:06.099 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:48:06.112 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.113 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.113 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.113 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:48:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-01-31 08:48:06.188 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:48:06.189 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:48:06.193 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:48:06.264 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:48:06.368 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:48:06.369 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:48:06.381 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:48:06.393 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:48:06.502 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:48:06.567 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 18e28f76635721a63f8606e53b0a41b159705a7e27403518630930a949e3a7a9
2025-01-31 08:48:06.738 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.344858S
2025-01-31 08:48:06.741 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:48:06.741 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:48:06.741 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:48:06.742 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:48:06.779 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 87a691f333b2521e38d351ed1ab60f44b2a0419c6eace5048f47bdf435f3749b
2025-01-31 08:48:06.948 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51376/hhplus using query 'SELECT 1'
2025-01-31 08:48:13.625 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.882402S
2025-01-31 08:48:13.625 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51376/hhplus)
2025-01-31 08:48:13.880 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:48:13.902 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:48:13.917 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:48:14.025 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:48:14.039 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:48:14.117 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@147ea894
2025-01-31 08:48:14.118 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:48:14.135 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:48:14.136 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:48:14.144 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:48:14.520 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:48:14.627 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:48:14.779 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:48:15.100 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:48:15.565 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:48:15.909 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:48:15.909 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:48:15.913 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:48:15.923 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-01-31 08:48:16.013 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.615 seconds (process running for 11.177)
2025-01-31 08:48:19.463 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:48:19.466 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:48:19.469 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:49:29.768 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:49:29.836 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:49:30.023 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5486 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:49:30.024 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:49:30.333 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:49:30.333 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:49:30.339 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2025-01-31 08:49:30.340 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:49:30.340 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:49:30.406 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 9 JPA repository interfaces.
2025-01-31 08:49:30.583 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:49:30.585 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:49:30.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:49:30.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-01-31 08:49:30.674 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:49:30.675 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:49:30.678 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:49:30.751 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:49:30.864 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:49:30.865 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:49:30.878 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:49:30.888 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:49:30.991 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:49:31.062 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 5ee8b64e68d89ab5e29d7e6e1b8bb654ddeaa8c257c0c417017c15aca1299f37
2025-01-31 08:49:31.254 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.366149S
2025-01-31 08:49:31.257 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:49:31.257 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:49:31.257 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:49:31.258 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:49:31.301 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 516edbceaba50f1b9d5f065014c6b134aa1c8c3f81a7164a34dd8b769db846a9
2025-01-31 08:49:31.473 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51451/hhplus using query 'SELECT 1'
2025-01-31 08:49:38.337 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.078964S
2025-01-31 08:49:38.338 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51451/hhplus)
2025-01-31 08:49:38.583 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:49:38.605 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:49:38.620 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:49:38.731 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:49:38.744 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:49:38.820 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@38aed8ad
2025-01-31 08:49:38.821 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:49:38.837 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:49:38.838 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:49:38.846 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:49:39.215 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:49:39.335 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:49:39.471 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:49:39.786 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:49:40.260 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:49:40.594 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:49:40.594 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:49:40.597 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:49:40.606 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-01-31 08:49:40.690 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.802 seconds (process running for 11.359)
2025-01-31 08:49:44.185 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:49:44.187 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:49:44.191 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:50:27.759 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:50:27.832 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:50:28.033 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5520 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:50:28.034 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:50:28.341 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:50:28.341 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:50:28.348 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 08:50:28.349 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:50:28.349 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:50:28.422 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 9 JPA repository interfaces.
2025-01-31 08:50:28.600 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:50:28.601 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:50:28.613 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:50:28.614 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-01-31 08:50:28.693 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:50:28.694 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:50:28.697 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:50:28.769 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:50:28.878 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:50:28.878 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:50:28.891 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:50:28.902 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:50:28.996 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:50:29.054 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f28b3bdeede2ffeb61bcdc95efd3dc05119bb11bdb7383c1d3ba5ecfa219932d
2025-01-31 08:50:29.231 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.329105S
2025-01-31 08:50:29.234 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:50:29.234 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:50:29.234 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:50:29.235 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:50:29.272 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: fd3a58512a502f9c38277b4da37cf776475a26e62845ec94e80ab2b104c72ab7
2025-01-31 08:50:29.452 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51529/hhplus using query 'SELECT 1'
2025-01-31 08:50:36.366 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.130326S
2025-01-31 08:50:36.366 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51529/hhplus)
2025-01-31 08:50:36.604 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:50:36.625 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:50:36.639 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:50:36.750 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:50:36.761 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:50:36.837 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@47a68e3f
2025-01-31 08:50:36.838 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:50:36.855 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:50:36.856 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:50:36.864 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:50:37.235 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:50:37.346 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:50:37.507 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:50:37.796 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:50:38.279 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:50:38.616 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:50:38.616 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:50:38.619 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:50:38.626 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 10 ms
2025-01-31 08:50:38.718 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.828 seconds (process running for 11.426)
2025-01-31 08:50:42.219 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:50:42.223 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:50:42.226 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-01-31 08:51:51.020 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-01-31 08:51:51.092 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-01-31 08:51:51.283 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 5540 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-01-31 08:51:51.284 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-01-31 08:51:51.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:51:51.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:51:51.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-01-31 08:51:51.598 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:51:51.599 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-01-31 08:51:51.667 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 9 JPA repository interfaces.
2025-01-31 08:51:51.849 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-01-31 08:51:51.849 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.861 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.862 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.862 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.862 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-01-31 08:51:51.862 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-01-31 08:51:51.939 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-01-31 08:51:51.940 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-01-31 08:51:51.944 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-01-31 08:51:52.014 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-01-31 08:51:52.121 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-01-31 08:51:52.121 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-01-31 08:51:52.133 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-01-31 08:51:52.144 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-01-31 08:51:52.250 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-01-31 08:51:52.308 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f23c0aa0ad07e0ee15647c01525d52f0f7185b048036b8d646fc947c391840c2
2025-01-31 08:51:52.493 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.349115S
2025-01-31 08:51:52.496 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-01-31 08:51:52.496 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-01-31 08:51:52.497 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-01-31 08:51:52.499 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-01-31 08:51:52.541 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 01345b0d0b331ac2086069871277d90f4787a32bfea0fa5f96c2ff0b84827485
2025-01-31 08:51:52.714 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51605/hhplus using query 'SELECT 1'
2025-01-31 08:51:59.484 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.985022S
2025-01-31 08:51:59.484 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51605/hhplus)
2025-01-31 08:51:59.732 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-01-31 08:51:59.755 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-01-31 08:51:59.771 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-01-31 08:51:59.884 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-01-31 08:51:59.897 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-01-31 08:51:59.973 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@147ea894
2025-01-31 08:51:59.974 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-01-31 08:51:59.991 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-01-31 08:51:59.992 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-01-31 08:52:00.000 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-01-31 08:52:00.376 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-01-31 08:52:00.491 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:52:00.652 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-01-31 08:52:00.940 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-01-31 08:52:01.421 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-01-31 08:52:01.765 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-01-31 08:52:01.766 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-01-31 08:52:01.769 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-01-31 08:52:01.777 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-01-31 08:52:01.862 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 10.716 seconds (process running for 11.278)
2025-01-31 08:52:05.415 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-01-31 08:52:05.418 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-01-31 08:52:05.423 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
