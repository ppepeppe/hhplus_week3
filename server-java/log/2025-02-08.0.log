2025-02-08 05:42:15.911 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-08 05:42:16.033 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-08 05:42:16.369 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2624 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-08 05:42:16.369 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-08 05:42:16.811 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-08 05:42:16.811 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-08 05:42:16.830 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-08 05:42:16.841 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-08 05:42:16.842 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-08 05:42:17.046 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 203 ms. Found 9 JPA repository interfaces.
2025-02-08 05:42:17.351 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-08 05:42:17.352 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-08 05:42:17.367 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.367 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.369 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.369 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-08 05:42:17.369 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-02-08 05:42:17.510 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-08 05:42:17.513 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-08 05:42:17.518 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-08 05:42:17.691 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-08 05:42:17.867 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-08 05:42:17.868 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-08 05:42:17.881 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-08 05:42:17.898 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-08 05:42:18.026 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-08 05:42:18.127 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 958ea4c02fbfa8db5bff8b452369ccdc7a86ef9e515dbf28b8c5c02e52db0fd9
2025-02-08 05:42:18.372 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.474054S
2025-02-08 05:42:18.375 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-08 05:42:18.375 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-08 05:42:18.376 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-08 05:42:18.381 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-08 05:42:18.454 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 8ff0623438ddc3272348e5d3713ded5aa41cb2f36c4420808a74fa4312bcbb2b
2025-02-08 05:42:18.572 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50904/hhplus using query 'SELECT 1'
2025-02-08 05:42:25.704 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.322913S
2025-02-08 05:42:25.705 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50904/hhplus)
2025-02-08 05:42:25.705 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-08 05:42:25.730 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 023f3ae359856f1dc7027dfe82d26623e256b399d4dfbd047955c592390b4a53
2025-02-08 05:42:25.941 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.236144S
2025-02-08 05:42:26.311 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-08 05:42:26.358 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-08 05:42:26.381 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-08 05:42:26.572 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-08 05:42:26.593 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-08 05:42:26.687 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@cecf41b
2025-02-08 05:42:26.688 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-08 05:42:26.715 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-08 05:42:26.715 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-08 05:42:26.729 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-08 05:42:27.347 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-08 05:42:27.474 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-08 05:42:27.672 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-08 05:42:28.128 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-08 05:42:28.508 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-08 05:42:28.594 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50977
2025-02-08 05:42:28.626 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50977
2025-02-08 05:42:29.065 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-08 05:42:29.503 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-08 05:42:29.503 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-08 05:42:29.511 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-08 05:42:29.521 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 18 ms
2025-02-08 05:42:29.630 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.499 seconds (process running for 19.615)
2025-02-08 05:42:33.265 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-08 05:42:33.268 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-08 05:42:33.273 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
