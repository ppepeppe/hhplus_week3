2025-02-11 00:21:12.437 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 00:21:12.561 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 00:21:12.894 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1219 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 00:21:12.894 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 00:21:13.367 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:21:13.368 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:21:13.381 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 00:21:13.383 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:21:13.384 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:21:13.583 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 198 ms. Found 9 JPA repository interfaces.
2025-02-11 00:21:13.995 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:21:13.996 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 00:21:14.014 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.015 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.015 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.015 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.015 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.016 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.016 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.016 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.017 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:21:14.017 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-02-11 00:21:14.170 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 00:21:14.172 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 00:21:14.179 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 00:21:14.353 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 00:21:14.536 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 00:21:14.537 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 00:21:14.544 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 00:21:14.559 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 00:21:14.712 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 00:21:16.205 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: b7cc28ea5cb2e66d30800533ab7b4394a752faa845b89f12bcb02f3961058d92
2025-02-11 00:21:16.830 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.271083S
2025-02-11 00:21:16.834 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 00:21:16.834 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 00:21:16.835 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 00:21:16.838 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 00:21:16.919 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 2bf15fa9002ffd2b6da7ddd3b7818acd0e82b39b9462ad5d61af8bbe1929b207
2025-02-11 00:21:17.070 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49575/hhplus using query 'SELECT 1'
2025-02-11 00:21:24.124 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.286373S
2025-02-11 00:21:24.125 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49575/hhplus)
2025-02-11 00:21:24.126 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 00:21:24.163 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 703c25aeecda9f94377e60ecf95786b7c7f78de2d415762c972de68981b8de8b
2025-02-11 00:21:24.415 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.289896S
2025-02-11 00:21:24.804 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 00:21:24.850 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 00:21:24.872 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 00:21:25.059 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 00:21:25.080 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 00:21:25.182 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@55a80f24
2025-02-11 00:21:25.184 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 00:21:25.207 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 00:21:25.207 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 00:21:25.219 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 00:21:25.827 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 00:21:25.940 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:21:26.154 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 00:21:26.581 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 00:21:26.957 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 00:21:27.038 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49641
2025-02-11 00:21:27.079 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49641
2025-02-11 00:21:27.508 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 00:21:27.952 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 00:21:27.953 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 00:21:27.957 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 00:21:27.966 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 00:21:28.082 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 15.423 seconds (process running for 16.51)
2025-02-11 00:21:31.671 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:21:31.673 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 00:21:31.677 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 00:23:51.847 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 00:23:51.978 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 00:23:52.357 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1281 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 00:23:52.358 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 00:23:52.800 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:23:52.800 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:23:52.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 00:23:52.820 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:23:52.820 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:23:53.003 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 182 ms. Found 9 JPA repository interfaces.
2025-02-11 00:23:53.314 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:23:53.315 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 00:23:53.331 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.331 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.331 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.331 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.331 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.332 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.332 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.332 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.333 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:23:53.333 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 00:23:53.480 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 00:23:53.483 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 00:23:53.488 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 00:23:53.666 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 00:23:53.845 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 00:23:53.846 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 00:23:53.860 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 00:23:53.876 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 00:23:53.973 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 00:23:54.043 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 8985a518a63472b817ec05149bdac820d0f53bc531ece6ef5e887b61614066ce
2025-02-11 00:23:54.229 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.353242S
2025-02-11 00:23:54.234 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 00:23:54.235 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 00:23:54.235 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 00:23:54.237 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 00:23:54.299 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 6a2366231786a982f724cdda9186779d27be26b9f2445ffbc5b922a64d43ef9a
2025-02-11 00:23:54.425 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49735/hhplus using query 'SELECT 1'
2025-02-11 00:24:01.105 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.867511S
2025-02-11 00:24:01.105 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49735/hhplus)
2025-02-11 00:24:01.106 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 00:24:01.134 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: f87b94cabd84d25378015d6e3f1c133b7b85d1dbf41513a7c0d6d5a80ac358a4
2025-02-11 00:24:01.346 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.239967S
2025-02-11 00:24:01.742 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 00:24:01.785 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 00:24:01.812 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 00:24:02.011 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 00:24:02.032 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 00:24:02.122 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2a67af78
2025-02-11 00:24:02.123 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 00:24:02.149 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 00:24:02.149 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 00:24:02.161 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 00:24:02.774 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 00:24:02.902 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:24:03.116 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 00:24:03.571 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 00:24:03.963 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 00:24:04.052 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49796
2025-02-11 00:24:04.078 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49796
2025-02-11 00:24:04.518 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 00:24:04.945 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 00:24:04.945 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 00:24:04.949 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 00:24:04.956 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-02-11 00:24:05.061 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.956 seconds (process running for 14.01)
2025-02-11 00:24:08.567 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:24:08.571 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 00:24:08.577 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 00:26:24.468 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 00:26:24.594 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 00:26:24.964 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1312 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 00:26:24.965 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 00:26:25.429 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:26:25.429 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:26:25.448 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 00:26:25.450 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:26:25.450 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:26:25.642 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 191 ms. Found 9 JPA repository interfaces.
2025-02-11 00:26:25.957 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:26:25.958 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 00:26:25.974 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.975 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.975 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.975 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.975 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.976 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.976 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.976 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.976 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:26:25.976 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 00:26:26.119 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 00:26:26.122 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 00:26:26.127 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 00:26:26.297 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 00:26:26.473 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 00:26:26.474 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 00:26:26.487 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 00:26:26.503 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 00:26:26.602 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 00:26:26.672 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: b5b1e560dc93ee98d58ca5354610234430c472f32fba6cce3b5d27941abdff3f
2025-02-11 00:26:26.863 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.360162S
2025-02-11 00:26:26.866 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 00:26:26.867 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 00:26:26.867 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 00:26:26.870 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 00:26:26.926 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 3eee49437e3a01433ad0c1a6818916debf8e967853b74a2514d32b7cea28095a
2025-02-11 00:26:27.088 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49853/hhplus using query 'SELECT 1'
2025-02-11 00:26:33.932 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.062282S
2025-02-11 00:26:33.932 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49853/hhplus)
2025-02-11 00:26:33.933 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 00:26:33.958 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 1c196945fdfda0eeaf2ce0ffce5acea7d79db4d968dbe96e833b2638acf73c07
2025-02-11 00:26:34.172 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.238519S
2025-02-11 00:26:34.547 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 00:26:34.589 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 00:26:34.613 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 00:26:34.799 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 00:26:34.821 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 00:26:34.910 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@cecf41b
2025-02-11 00:26:34.911 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 00:26:34.937 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 00:26:34.938 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 00:26:34.952 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 00:26:35.566 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 00:26:35.698 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:26:35.923 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 00:26:36.365 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 00:26:36.734 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 00:26:36.821 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49916
2025-02-11 00:26:36.850 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49916
2025-02-11 00:26:37.286 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 00:26:37.706 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 00:26:37.706 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 00:26:37.710 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 00:26:37.719 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 00:26:37.826 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.126 seconds (process running for 14.139)
2025-02-11 00:26:41.344 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:26:41.348 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 00:26:41.353 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 00:31:47.325 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 00:31:47.461 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 00:31:47.810 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1378 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 00:31:47.811 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 00:31:48.313 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:31:48.313 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:31:48.322 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 00:31:48.324 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:31:48.325 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 00:31:48.536 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 210 ms. Found 9 JPA repository interfaces.
2025-02-11 00:31:48.869 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 00:31:48.870 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 00:31:48.886 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.886 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.886 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 00:31:48.887 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 00:31:49.029 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 00:31:49.031 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 00:31:49.048 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 00:31:49.223 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 00:31:49.400 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 00:31:49.404 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 00:31:49.419 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 00:31:49.435 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 00:31:49.532 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 00:31:49.613 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 37f6859c8196a9ab2ef4ede4dca2cdbbbc3650128e46b4cdd1881bf67b45698a
2025-02-11 00:31:49.791 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.355905S
2025-02-11 00:31:49.795 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 00:31:49.795 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 00:31:49.795 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 00:31:49.797 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 00:31:49.842 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 6362056421b0934c6eef1cea490228da606f6a5083b76f826ca673c674b65568
2025-02-11 00:31:49.998 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49980/hhplus using query 'SELECT 1'
2025-02-11 00:31:56.693 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.895719S
2025-02-11 00:31:56.693 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49980/hhplus)
2025-02-11 00:31:56.694 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 00:31:56.717 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 87e1f5d8bb498f1df063405edc0782d4676b8130c1ec030039095efe4349c1bd
2025-02-11 00:31:56.927 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.232394S
2025-02-11 00:31:57.314 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 00:31:57.370 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 00:31:57.398 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 00:31:57.587 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 00:31:57.607 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 00:31:57.695 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@74ec1d8
2025-02-11 00:31:57.698 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 00:31:57.723 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 00:31:57.723 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 00:31:57.735 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 00:31:58.328 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 00:31:58.457 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:31:58.661 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 00:31:59.122 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 00:31:59.511 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 00:31:59.597 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50041
2025-02-11 00:31:59.625 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50041
2025-02-11 00:32:00.073 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 00:32:00.497 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 00:32:00.498 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 00:32:00.502 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 00:32:00.515 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 17 ms
2025-02-11 00:32:00.619 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.048 seconds (process running for 14.086)
2025-02-11 00:32:04.106 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 00:32:04.109 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 00:32:04.113 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 01:34:36.123 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 01:34:36.254 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 01:34:36.608 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1606 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 01:34:36.609 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 01:34:37.075 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:34:37.075 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:34:37.096 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 01:34:37.108 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:34:37.108 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:34:37.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 188 ms. Found 9 JPA repository interfaces.
2025-02-11 01:34:37.571 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:34:37.575 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.590 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:34:37.591 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 01:34:37.715 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 01:34:37.721 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 01:34:37.741 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 01:34:37.917 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 01:34:38.076 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 01:34:38.077 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 01:34:38.083 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 01:34:38.097 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 01:34:38.210 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 01:34:39.620 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 650011c5dd1d7636f9872d9cc1f6d027bfe7e34177c202f821be475743f1f2ac
2025-02-11 01:34:40.379 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.282435S
2025-02-11 01:34:40.385 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 01:34:40.385 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 01:34:40.385 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 01:34:40.389 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 01:34:40.455 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 77e99f46492bd5a06ac296c4d16b73983e79f194771d512abb964b9f0629234d
2025-02-11 01:34:40.632 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50310/hhplus using query 'SELECT 1'
2025-02-11 01:34:47.713 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.323425S
2025-02-11 01:34:47.713 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50310/hhplus)
2025-02-11 01:34:47.714 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 01:34:47.745 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: abec64be1649723364949edc30357f61006424f1c82db48f978366e374344d10
2025-02-11 01:34:47.961 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.24721S
2025-02-11 01:34:48.302 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 01:34:48.342 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 01:34:48.363 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 01:34:48.556 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 01:34:48.575 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 01:34:48.658 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@69d6c864
2025-02-11 01:34:48.659 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 01:34:48.684 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 01:34:48.684 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 01:34:48.696 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 01:34:49.287 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 01:34:49.409 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:34:49.597 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 01:34:50.040 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 01:34:50.410 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 01:34:50.486 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50375
2025-02-11 01:34:50.514 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50375
2025-02-11 01:34:50.913 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 01:34:51.332 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 01:34:51.332 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 01:34:51.336 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 01:34:51.347 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 15 ms
2025-02-11 01:34:51.456 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 15.108 seconds (process running for 16.263)
2025-02-11 01:34:54.984 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:34:54.987 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 01:34:54.993 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 01:42:52.045 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 01:42:52.174 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 01:42:52.530 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1733 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 01:42:52.531 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 01:42:52.998 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:42:52.998 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:42:53.030 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-02-11 01:42:53.032 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:42:53.033 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:42:53.228 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 194 ms. Found 9 JPA repository interfaces.
2025-02-11 01:42:53.535 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:42:53.536 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 01:42:53.554 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.555 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.555 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.555 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.555 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.555 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.556 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.556 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.556 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:42:53.556 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-02-11 01:42:53.696 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 01:42:53.698 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 01:42:53.703 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 01:42:53.873 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 01:42:54.052 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 01:42:54.053 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 01:42:54.060 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 01:42:54.074 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 01:42:54.183 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 01:42:55.578 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 004ca5c9ac6565575eccd75227141b1084fb8ade2aee433311618a9ba1ccd34d
2025-02-11 01:42:56.321 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.247163S
2025-02-11 01:42:56.325 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 01:42:56.326 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 01:42:56.326 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 01:42:56.329 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 01:42:56.395 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 3d702b2c55e7032bb18074d7b0a9eb167b45d1d886ed9692a9575930854bdc31
2025-02-11 01:42:56.528 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50478/hhplus using query 'SELECT 1'
2025-02-11 01:43:03.689 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.35983S
2025-02-11 01:43:03.689 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50478/hhplus)
2025-02-11 01:43:03.690 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 01:43:03.720 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 3800665cbedba0fd16198f688d0746fb4318897c38cb36ef58a37242931372cb
2025-02-11 01:43:03.947 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.256958S
2025-02-11 01:43:04.325 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 01:43:04.367 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 01:43:04.389 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 01:43:04.577 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 01:43:04.601 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 01:43:04.692 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@87814f1
2025-02-11 01:43:04.693 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 01:43:04.718 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 01:43:04.719 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 01:43:04.731 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 01:43:05.330 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 01:43:05.457 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:43:05.651 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 01:43:06.124 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 01:43:06.519 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 01:43:06.598 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50546
2025-02-11 01:43:06.627 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50546
2025-02-11 01:43:07.087 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 01:43:07.535 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 01:43:07.535 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 01:43:07.539 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 01:43:07.547 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 01:43:07.652 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 15.383 seconds (process running for 16.411)
2025-02-11 01:43:11.309 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:43:11.312 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 01:43:11.322 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 01:44:18.201 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 01:44:18.327 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 01:44:18.678 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1782 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 01:44:18.679 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 01:44:19.122 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:44:19.123 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:44:19.141 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 01:44:19.143 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:44:19.143 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:44:19.325 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 180 ms. Found 9 JPA repository interfaces.
2025-02-11 01:44:19.629 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:44:19.630 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 01:44:19.645 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.645 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:44:19.647 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-02-11 01:44:19.786 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 01:44:19.788 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 01:44:19.794 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 01:44:19.961 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 01:44:20.146 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 01:44:20.147 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 01:44:20.159 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 01:44:20.177 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 01:44:20.288 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 01:44:20.358 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 012d113e61edbe1ba930d9c6650e9157665af13fe7659c0fb4015b3365133379
2025-02-11 01:44:20.541 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.364255S
2025-02-11 01:44:20.546 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 01:44:20.546 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 01:44:20.547 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 01:44:20.549 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 01:44:20.606 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 319f1483ea075f15feac83a03dda34ea9a3649e2f0a595a01cc5d9f81ff87fa0
2025-02-11 01:44:20.769 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50596/hhplus using query 'SELECT 1'
2025-02-11 01:44:27.661 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.111905S
2025-02-11 01:44:27.662 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50596/hhplus)
2025-02-11 01:44:27.662 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 01:44:27.690 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 17f0f25706bd0afaeb0d9a177ee739b165d0444e9022b371f630265ea1d37728
2025-02-11 01:44:27.927 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.265018S
2025-02-11 01:44:28.282 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 01:44:28.322 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 01:44:28.344 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 01:44:28.533 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 01:44:28.554 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 01:44:28.637 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@563db2f5
2025-02-11 01:44:28.639 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 01:44:28.664 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 01:44:28.664 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 01:44:28.676 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 01:44:29.279 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 01:44:29.409 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:44:29.639 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 01:44:30.052 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 01:44:30.429 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 01:44:30.522 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50658
2025-02-11 01:44:30.554 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50658
2025-02-11 01:44:31.009 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 01:44:31.471 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 01:44:31.471 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 01:44:31.475 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 01:44:31.484 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 01:44:31.599 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.149 seconds (process running for 14.211)
2025-02-11 01:44:35.249 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:44:35.252 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 01:44:35.260 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 01:49:18.201 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 01:49:18.323 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 01:49:18.658 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1868 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 01:49:18.658 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 01:49:19.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:49:19.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:49:19.157 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 01:49:19.158 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:49:19.158 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:49:19.362 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 202 ms. Found 9 JPA repository interfaces.
2025-02-11 01:49:19.663 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:49:19.664 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.680 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.681 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.681 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.681 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:49:19.681 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 01:49:19.815 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 01:49:19.817 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 01:49:19.825 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 01:49:19.994 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 01:49:20.180 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 01:49:20.181 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 01:49:20.199 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 01:49:20.214 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 01:49:20.320 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 01:49:20.399 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: d578bc98d5a41e31cda05a746755c2856b4af695f9d009929e902f8f771df464
2025-02-11 01:49:20.635 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.420129S
2025-02-11 01:49:20.638 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 01:49:20.638 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 01:49:20.639 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 01:49:20.641 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 01:49:20.709 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 63ed88eab4dfa88519ecd6b548cf453e44caea5cde6b3d6874fad17b6004e3da
2025-02-11 01:49:20.864 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50783/hhplus using query 'SELECT 1'
2025-02-11 01:49:27.941 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.300307S
2025-02-11 01:49:27.942 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50783/hhplus)
2025-02-11 01:49:27.942 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 01:49:27.972 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: c396ab553027877d13f43c9db548edc573879909765d740e66e0f9d5567eea04
2025-02-11 01:49:28.203 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.260359S
2025-02-11 01:49:28.597 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 01:49:28.645 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 01:49:28.668 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 01:49:28.857 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 01:49:28.878 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 01:49:28.964 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2a74a078
2025-02-11 01:49:28.965 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 01:49:28.993 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 01:49:28.994 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 01:49:29.005 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 01:49:29.629 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 01:49:29.767 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:49:29.965 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 01:49:30.439 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 01:49:30.864 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 01:49:30.946 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50848
2025-02-11 01:49:30.975 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50848
2025-02-11 01:49:31.388 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 01:49:31.817 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 01:49:31.817 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 01:49:31.821 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 01:49:31.829 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 01:49:31.931 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.5 seconds (process running for 14.537)
2025-02-11 01:49:42.567 [pool-3-thread-26]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-36]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-28]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-26] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=17)
2025-02-11 01:49:42.568 [pool-3-thread-36] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10005ms (total=10, active=10, idle=0, waiting=7)
2025-02-11 01:49:42.568 [pool-3-thread-21]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-30]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-28] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=17)
2025-02-11 01:49:42.568 [pool-3-thread-19]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.567 [pool-3-thread-39]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-25]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-38]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-31]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-22]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-20]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-24]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-34]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.569 [pool-3-thread-24] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=20)
2025-02-11 01:49:42.568 [pool-3-thread-35]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-37]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-27]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-32]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.570 [pool-3-thread-32] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=11)
2025-02-11 01:49:42.568 [pool-3-thread-23]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.570 [pool-3-thread-23] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=19)
2025-02-11 01:49:42.568 [pool-3-thread-29]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.570 [pool-3-thread-29] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 01:49:42.568 [pool-3-thread-33]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-40]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.568 [pool-3-thread-21] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=21)
2025-02-11 01:49:42.568 [pool-3-thread-30] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=14)
2025-02-11 01:49:42.568 [pool-3-thread-19] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10001ms (total=10, active=10, idle=0, waiting=25)
2025-02-11 01:49:42.568 [pool-3-thread-25] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=19)
2025-02-11 01:49:42.568 [pool-3-thread-39] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 01:49:42.569 [pool-3-thread-38] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 01:49:42.569 [pool-3-thread-31] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=13)
2025-02-11 01:49:42.569 [pool-3-thread-22] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=21)
2025-02-11 01:49:42.569 [pool-3-thread-20] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=22)
2025-02-11 01:49:42.569 [pool-3-thread-34] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=9)
2025-02-11 01:49:42.569 [pool-3-thread-35] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=9)
2025-02-11 01:49:42.569 [pool-3-thread-37] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=7)
2025-02-11 01:49:42.569 [pool-3-thread-27] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=16)
2025-02-11 01:49:42.570 [pool-3-thread-33] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=11)
2025-02-11 01:49:42.570 [pool-3-thread-40] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 01:49:42.581 [pool-3-thread-1]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:49:42.581 [pool-3-thread-1] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=3)
2025-02-11 01:49:45.298 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:49:45.300 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 01:49:45.304 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 01:50:10.388 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 01:50:10.512 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 01:50:10.836 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1901 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 01:50:10.837 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 01:50:11.285 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:50:11.285 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:50:11.305 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 01:50:11.306 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:50:11.307 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 01:50:11.489 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 181 ms. Found 9 JPA repository interfaces.
2025-02-11 01:50:11.797 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 01:50:11.798 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 01:50:11.817 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.817 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.817 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 01:50:11.818 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 01:50:11.947 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 01:50:11.951 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 01:50:11.967 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 01:50:12.145 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 01:50:12.320 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 01:50:12.321 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 01:50:12.336 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 01:50:12.351 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 01:50:12.459 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 01:50:12.536 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 97e0ae62bd246f20fcd8ea5954b434f3c08574d279c57b6134ac7802a16b2363
2025-02-11 01:50:12.743 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.391552S
2025-02-11 01:50:12.746 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 01:50:12.746 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 01:50:12.747 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 01:50:12.749 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 01:50:12.794 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: f1cc6b664d44066744d37b8fb3e77893debc9073eade5b80fac70e12ba7db6cb
2025-02-11 01:50:12.904 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50900/hhplus using query 'SELECT 1'
2025-02-11 01:50:19.691 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.942276S
2025-02-11 01:50:19.692 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50900/hhplus)
2025-02-11 01:50:19.693 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 01:50:19.719 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 96cda9bd78294baddbd49a98e1a96a5da31c187e2702fb1ef69ea17aa5155de9
2025-02-11 01:50:19.944 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.250891S
2025-02-11 01:50:20.306 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 01:50:20.346 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 01:50:20.370 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 01:50:20.559 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 01:50:20.579 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 01:50:20.670 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f50a274
2025-02-11 01:50:20.672 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 01:50:20.696 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 01:50:20.697 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 01:50:20.709 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 01:50:21.302 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 01:50:21.432 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:50:21.651 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 01:50:22.063 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 01:50:22.430 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 01:50:22.513 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50961
2025-02-11 01:50:22.542 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50961
2025-02-11 01:50:22.983 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 01:50:23.413 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 01:50:23.413 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 01:50:23.417 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 01:50:23.430 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 17 ms
2025-02-11 01:50:23.544 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.937 seconds (process running for 13.97)
2025-02-11 01:50:34.208 [pool-3-thread-21]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-20]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-35]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-34]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-40]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.209 [pool-3-thread-33]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.209 [pool-3-thread-31]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.209 [pool-3-thread-38]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-25]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-26]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-36]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-14]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-39]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-32]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.208 [pool-3-thread-29]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.211 [pool-3-thread-32] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 01:50:34.208 [pool-3-thread-23]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.210 [pool-3-thread-34] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=6)
2025-02-11 01:50:34.211 [pool-3-thread-23] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=23)
2025-02-11 01:50:34.210 [pool-3-thread-40] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=5)
2025-02-11 01:50:34.210 [pool-3-thread-38] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=9)
2025-02-11 01:50:34.210 [pool-3-thread-25] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=21)
2025-02-11 01:50:34.208 [pool-3-thread-30]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.211 [pool-3-thread-14] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=6)
2025-02-11 01:50:34.209 [pool-3-thread-28]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.211 [pool-3-thread-39] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=6)
2025-02-11 01:50:34.209 [pool-3-thread-21] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=24)
2025-02-11 01:50:34.209 [pool-3-thread-22]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.210 [pool-3-thread-35] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10008ms (total=10, active=10, idle=0, waiting=13)
2025-02-11 01:50:34.212 [pool-3-thread-30] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 01:50:34.209 [pool-3-thread-27]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.209 [pool-3-thread-24]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.210 [pool-3-thread-31] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 01:50:34.209 [pool-3-thread-37]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.210 [pool-3-thread-26] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=20)
2025-02-11 01:50:34.210 [pool-3-thread-33] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=14)
2025-02-11 01:50:34.213 [pool-3-thread-37] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=8)
2025-02-11 01:50:34.212 [pool-3-thread-28] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=17)
2025-02-11 01:50:34.210 [pool-3-thread-20] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=24)
2025-02-11 01:50:34.212 [pool-3-thread-22] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10004ms (total=10, active=10, idle=0, waiting=5)
2025-02-11 01:50:34.211 [pool-3-thread-36] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10008ms (total=10, active=10, idle=0, waiting=12)
2025-02-11 01:50:34.212 [pool-3-thread-27] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=19)
2025-02-11 01:50:34.211 [pool-3-thread-29] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=17)
2025-02-11 01:50:34.213 [pool-3-thread-24] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=21)
2025-02-11 01:50:34.225 [pool-3-thread-4]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 01:50:34.225 [pool-3-thread-4] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=3)
2025-02-11 01:50:36.909 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 01:50:36.913 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 01:50:36.919 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 02:18:19.262 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 02:18:19.419 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 02:18:19.751 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2073 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 02:18:19.752 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 02:18:20.206 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:18:20.206 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:18:20.225 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 02:18:20.227 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:18:20.227 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:18:20.418 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 190 ms. Found 9 JPA repository interfaces.
2025-02-11 02:18:20.727 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:18:20.728 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 02:18:20.743 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.743 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.745 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.745 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:18:20.745 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-02-11 02:18:20.885 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 02:18:20.888 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 02:18:20.903 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 02:18:21.058 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 02:18:21.217 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 02:18:21.218 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 02:18:21.224 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 02:18:21.242 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 02:18:21.347 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 02:18:22.746 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 22f0f449ba3248d73da1ab58e7efb8e5d0ec29fb80ec0c3f3e477af1173e44e3
2025-02-11 02:18:23.466 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.22479S
2025-02-11 02:18:23.470 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 02:18:23.470 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 02:18:23.470 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 02:18:23.473 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 02:18:23.532 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: c88b9dab6fae897a51ebd746903ba7ac4f89829a0455f00144e1adab410d5e44
2025-02-11 02:18:23.651 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51084/hhplus using query 'SELECT 1'
2025-02-11 02:18:30.897 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.42413S
2025-02-11 02:18:30.897 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51084/hhplus)
2025-02-11 02:18:30.898 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 02:18:30.930 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 99190db5305a9231cbac07c71d20b91782a3ceb0d6fba8f24c607b0449eb3bf3
2025-02-11 02:18:31.150 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.252127S
2025-02-11 02:18:31.531 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 02:18:31.576 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 02:18:31.598 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 02:18:31.791 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 02:18:31.811 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 02:18:31.897 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@743615f1
2025-02-11 02:18:31.898 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 02:18:31.926 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 02:18:31.927 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 02:18:31.939 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 02:18:32.544 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 02:18:32.679 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:18:32.871 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 02:18:33.320 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 02:18:33.697 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 02:18:33.781 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51149
2025-02-11 02:18:33.811 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51149
2025-02-11 02:18:34.221 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 02:18:34.637 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 02:18:34.637 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 02:18:34.641 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 02:18:34.650 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 02:18:34.751 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 15.228 seconds (process running for 16.287)
2025-02-11 02:18:45.426 [pool-3-thread-23]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-36]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-28]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-19]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-21]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-33]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-25]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-38]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-26]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.428 [pool-3-thread-25] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.426 [pool-3-thread-20]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.428 [pool-3-thread-26] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.426 [pool-3-thread-32]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-30]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-37]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.426 [pool-3-thread-40]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.428 [pool-3-thread-32] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10005ms (total=10, active=10, idle=0, waiting=12)
2025-02-11 02:18:45.428 [pool-3-thread-30] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=14)
2025-02-11 02:18:45.426 [pool-3-thread-39]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-34]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-22]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-27]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-29]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-35]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.429 [pool-3-thread-29] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 02:18:45.429 [pool-3-thread-35] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=8)
2025-02-11 02:18:45.427 [pool-3-thread-24]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.427 [pool-3-thread-31]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.430 [pool-3-thread-24] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.430 [pool-3-thread-31] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10005ms (total=10, active=10, idle=0, waiting=12)
2025-02-11 02:18:45.427 [pool-3-thread-23] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.427 [pool-3-thread-36] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=8)
2025-02-11 02:18:45.427 [pool-3-thread-28] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 02:18:45.427 [pool-3-thread-19] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=15)
2025-02-11 02:18:45.428 [pool-3-thread-21] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10008ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.428 [pool-3-thread-33] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=10)
2025-02-11 02:18:45.428 [pool-3-thread-38] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=6)
2025-02-11 02:18:45.428 [pool-3-thread-20] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.428 [pool-3-thread-37] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=6)
2025-02-11 02:18:45.428 [pool-3-thread-40] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.429 [pool-3-thread-39] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10007ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.429 [pool-3-thread-34] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10006ms (total=10, active=10, idle=0, waiting=10)
2025-02-11 02:18:45.429 [pool-3-thread-22] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10011ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.429 [pool-3-thread-27] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10009ms (total=10, active=10, idle=0, waiting=4)
2025-02-11 02:18:45.434 [pool-3-thread-2]  WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-02-11 02:18:45.434 [pool-3-thread-2] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - HangHaePlusDataSource - Connection is not available, request timed out after 10003ms (total=10, active=10, idle=0, waiting=3)
2025-02-11 02:18:48.158 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:18:48.162 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 02:18:48.168 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 02:19:09.046 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 02:19:09.196 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 02:19:09.567 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2118 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 02:19:09.568 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 02:19:10.021 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:19:10.021 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:19:10.039 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 02:19:10.051 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:19:10.051 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:19:10.241 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 188 ms. Found 9 JPA repository interfaces.
2025-02-11 02:19:10.551 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:19:10.552 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 02:19:10.568 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.569 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.569 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.569 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.569 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.569 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.570 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.570 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.570 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:19:10.570 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 02:19:10.714 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 02:19:10.717 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 02:19:10.723 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 02:19:10.884 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 02:19:11.062 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 02:19:11.063 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 02:19:11.075 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 02:19:11.092 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 02:19:11.202 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 02:19:11.272 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 12dbc2285788d074fc8b12128a72e97b7b64a294b267d0311c0aa5acc3071be5
2025-02-11 02:19:11.471 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.378899S
2025-02-11 02:19:11.474 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 02:19:11.474 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 02:19:11.474 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 02:19:11.477 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 02:19:11.523 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 56fe54bbce72c09917c122e3855c7abfbde48dcaa0715af101d21fcfee6d50db
2025-02-11 02:19:11.694 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51199/hhplus using query 'SELECT 1'
2025-02-11 02:19:18.675 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.198163S
2025-02-11 02:19:18.675 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51199/hhplus)
2025-02-11 02:19:18.676 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 02:19:18.703 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 33c290f8541d756a4963c1b63822ea21e14853e26843e9911f0b27d0326175d9
2025-02-11 02:19:18.920 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.244322S
2025-02-11 02:19:19.277 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 02:19:19.316 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 02:19:19.339 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 02:19:19.524 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 02:19:19.546 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 02:19:19.635 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e47afd
2025-02-11 02:19:19.638 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 02:19:19.663 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 02:19:19.664 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 02:19:19.674 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 02:19:20.267 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 02:19:20.406 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:19:20.625 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 02:19:21.047 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 02:19:21.421 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 02:19:21.519 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51264
2025-02-11 02:19:21.551 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51264
2025-02-11 02:19:21.967 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 02:19:22.396 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 02:19:22.396 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 02:19:22.400 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 02:19:22.408 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 02:19:22.506 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.174 seconds (process running for 14.251)
2025-02-11 02:19:26.097 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:19:26.100 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 02:19:26.103 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 02:22:21.410 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 02:22:21.538 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 02:22:21.912 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2156 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 02:22:21.912 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 02:22:22.404 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:22:22.404 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:22:22.413 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 02:22:22.416 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:22:22.416 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:22:22.616 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 199 ms. Found 9 JPA repository interfaces.
2025-02-11 02:22:22.934 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:22:22.935 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 02:22:22.951 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.951 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.953 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.953 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:22:22.953 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 02:22:23.092 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 02:22:23.095 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 02:22:23.100 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 02:22:23.273 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 02:22:23.462 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 02:22:23.463 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 02:22:23.480 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 02:22:23.496 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 02:22:23.607 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 02:22:23.684 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 34f0e26325ac03e6332a5183542881e0ad98f2053bd74d5c0f181964ab9ee376
2025-02-11 02:22:23.898 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.402207S
2025-02-11 02:22:23.901 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 02:22:23.901 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 02:22:23.902 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 02:22:23.904 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 02:22:23.950 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: a911ace6e38847f22a89e97146be337ef5a200e601f22f9172a5e61effea6d64
2025-02-11 02:22:24.090 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51320/hhplus using query 'SELECT 1'
2025-02-11 02:22:31.156 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.251716S
2025-02-11 02:22:31.156 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51320/hhplus)
2025-02-11 02:22:31.157 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 02:22:31.183 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 74c63b9313d8575f4d5b404296e0671f2bbaf36579b01a74e5eb1a6d1aac0dcf
2025-02-11 02:22:31.409 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.25194S
2025-02-11 02:22:31.775 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 02:22:31.823 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 02:22:31.849 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 02:22:32.038 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 02:22:32.057 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 02:22:32.141 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2a67af78
2025-02-11 02:22:32.142 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 02:22:32.170 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 02:22:32.170 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 02:22:32.182 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 02:22:32.786 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 02:22:32.924 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:22:33.129 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 02:22:33.587 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 02:22:33.985 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 02:22:34.077 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51383
2025-02-11 02:22:34.102 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51383
2025-02-11 02:22:34.528 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 02:22:34.955 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 02:22:34.955 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 02:22:34.960 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 02:22:34.968 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 02:22:35.072 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.388 seconds (process running for 14.444)
2025-02-11 02:22:38.730 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:22:38.733 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 02:22:38.742 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 02:24:18.020 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 02:24:18.194 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 02:24:18.521 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2185 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 02:24:18.522 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 02:24:18.966 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:24:18.966 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:24:18.984 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 02:24:18.996 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:24:18.996 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 02:24:19.178 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 181 ms. Found 9 JPA repository interfaces.
2025-02-11 02:24:19.476 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 02:24:19.477 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.494 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.494 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.494 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 02:24:19.494 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-02-11 02:24:19.629 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 02:24:19.631 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 02:24:19.636 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 02:24:19.800 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 02:24:19.970 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 02:24:19.971 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 02:24:19.985 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 02:24:20.000 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 02:24:20.096 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 02:24:20.168 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 9b82f6d09a3e5b54ff1133ba75230303e2c7f2b2011d864d3551206e913370d1
2025-02-11 02:24:20.346 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.346128S
2025-02-11 02:24:20.349 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 02:24:20.349 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 02:24:20.350 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 02:24:20.352 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 02:24:20.405 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: c2b0fd893c058967a9befb9af4ed99a17c939878dbd0f2b1e6f2bd7a66ee8d29
2025-02-11 02:24:20.559 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51446/hhplus using query 'SELECT 1'
2025-02-11 02:24:27.273 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.921044S
2025-02-11 02:24:27.273 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51446/hhplus)
2025-02-11 02:24:27.274 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 02:24:27.295 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: d58f4897160183b988717b786c159857d540c3ef84bbce336c2bbc996a5f2d78
2025-02-11 02:24:27.506 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.232046S
2025-02-11 02:24:27.880 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 02:24:27.916 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 02:24:27.936 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 02:24:28.112 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 02:24:28.132 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 02:24:28.216 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@5121f908
2025-02-11 02:24:28.217 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 02:24:28.241 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 02:24:28.241 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 02:24:28.256 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 02:24:28.848 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 02:24:28.967 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:24:29.197 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 02:24:29.629 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 02:24:30.010 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 02:24:30.092 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51506
2025-02-11 02:24:30.119 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51506
2025-02-11 02:24:30.548 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 02:24:30.958 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 02:24:30.958 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 02:24:30.962 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 02:24:30.971 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 02:24:31.077 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.781 seconds (process running for 13.822)
2025-02-11 02:24:34.686 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 02:24:34.689 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 02:24:34.694 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:05:07.099 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:05:07.229 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:05:07.645 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 707 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:05:07.645 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:05:08.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:05:08.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:05:08.323 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2025-02-11 03:05:08.328 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:05:08.329 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:05:08.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 285 ms. Found 9 JPA repository interfaces.
2025-02-11 03:05:08.947 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:05:08.949 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:05:08.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.971 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.971 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:05:08.971 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-02-11 03:05:09.137 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:05:09.140 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:05:09.146 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:05:09.346 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:05:09.703 [Test worker]  WARN org.testcontainers.dockerclient.DockerClientProviderStrategy - DOCKER_HOST unix:///var/run/docker.sock is not listening
java.io.IOException: com.sun.jna.LastErrorException: [61] Connection refused
	at com.github.dockerjava.transport.DomainSocket.<init>(DomainSocket.java:63)
	at com.github.dockerjava.transport.BsdDomainSocket.<init>(BsdDomainSocket.java:43)
	at com.github.dockerjava.transport.DomainSocket.get(DomainSocket.java:138)
	at com.github.dockerjava.transport.UnixSocket.get(UnixSocket.java:29)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$test$2(DockerClientProviderStrategy.java:194)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.test(DockerClientProviderStrategy.java:208)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.tryOutStrategy(DockerClientProviderStrategy.java:284)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$5(DockerClientProviderStrategy.java:263)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:264)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: com.sun.jna.LastErrorException: [61] Connection refused
	at com.github.dockerjava.transport.BsdDomainSocket.connect(Native Method)
	at com.github.dockerjava.transport.BsdDomainSocket.connect(BsdDomainSocket.java:49)
	at com.github.dockerjava.transport.DomainSocket.open(DomainSocket.java:69)
	at com.github.dockerjava.transport.DomainSocket.<init>(DomainSocket.java:59)
	... 148 common frames omitted
2025-02-11 03:05:09.706 [Test worker]  WARN org.testcontainers.dockerclient.DockerClientProviderStrategy - DOCKER_HOST unix:///Users/seongdo/.docker/run/docker.sock is not listening
java.io.IOException: com.sun.jna.LastErrorException: [61] Connection refused
	at com.github.dockerjava.transport.DomainSocket.<init>(DomainSocket.java:63)
	at com.github.dockerjava.transport.BsdDomainSocket.<init>(BsdDomainSocket.java:43)
	at com.github.dockerjava.transport.DomainSocket.get(DomainSocket.java:138)
	at com.github.dockerjava.transport.UnixSocket.get(UnixSocket.java:29)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$test$2(DockerClientProviderStrategy.java:194)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.test(DockerClientProviderStrategy.java:208)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.tryOutStrategy(DockerClientProviderStrategy.java:284)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$5(DockerClientProviderStrategy.java:263)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1602)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:264)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: com.sun.jna.LastErrorException: [61] Connection refused
	at com.github.dockerjava.transport.BsdDomainSocket.connect(Native Method)
	at com.github.dockerjava.transport.BsdDomainSocket.connect(BsdDomainSocket.java:49)
	at com.github.dockerjava.transport.DomainSocket.open(DomainSocket.java:69)
	at com.github.dockerjava.transport.DomainSocket.<init>(DomainSocket.java:59)
	... 148 common frames omitted
2025-02-11 03:05:09.713 [Test worker]  INFO org.testcontainers.dockerclient.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([/opt/homebrew/opt/openjdk@17/bin, /opt/homebrew/bin, /opt/homebrew/sbin, /usr/local/bin, /System/Cryptexes/App/usr/bin, /usr/bin, /bin, /usr/sbin, /sbin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin])
2025-02-11 03:05:09.713 [Test worker] ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-02-11 03:05:09.713 [Test worker]  WARN org.springframework.web.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Unable to load cache item
2025-02-11 03:05:09.755 [Test worker]  INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-11 03:05:09.775 [Test worker] ERROR org.springframework.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Unable to load cache item
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	... 114 common frames omitted
Caused by: java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$7(DockerClientProviderStrategy.java:274)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:265)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	... 123 common frames omitted
2025-02-11 03:05:09.779 [Test worker]  WARN org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [kr.hhplus.be.server.integration.CouponUseCaseTest@4fd7c296]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@7da7a932 testClass = kr.hhplus.be.server.integration.CouponUseCaseTest, locations = [], classes = [kr.hhplus.be.server.ServerApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@31f295b6, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@7ebe2e47, [ImportsContextCustomizer@5d6d21e2 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4d09cade, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@65629ac6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1e957e2f, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@62b57479, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@78910096, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@f4e7e8ce], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.IllegalStateException: Unable to load cache item
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 89 common frames omitted
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	... 114 common frames omitted
Caused by: java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$7(DockerClientProviderStrategy.java:274)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:265)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	... 123 common frames omitted
2025-02-11 03:12:05.184 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:12:05.310 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:12:05.655 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1005 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:12:05.656 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:12:06.101 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:12:06.101 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:12:06.112 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 JPA repository interfaces.
2025-02-11 03:12:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:12:06.114 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:12:06.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 183 ms. Found 9 JPA repository interfaces.
2025-02-11 03:12:06.579 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:12:06.580 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.596 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:12:06.597 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:12:06.727 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:12:06.731 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:12:06.746 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:12:06.929 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:12:07.088 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:12:07.089 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:12:07.096 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:12:07.108 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:12:07.263 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:12:08.553 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 1db05c5bcdc1538f14e3596de0018a24d8fc87497b0cbffaab4379f06706c33e
2025-02-11 03:12:09.416 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.308078S
2025-02-11 03:12:09.422 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:12:09.422 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:12:09.423 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:12:09.426 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:12:09.477 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 367d918930bb558a7381c4e18d43004d5b558056fcbb145d92502f8cbc7b2765
2025-02-11 03:12:09.684 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49375/hhplus using query 'SELECT 1'
2025-02-11 03:12:16.621 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.19526S
2025-02-11 03:12:16.621 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49375/hhplus)
2025-02-11 03:12:16.622 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:12:16.644 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: f3b7d3a12bc7cb1fcf4f899bb7804a3ef0563bae328e9cb805dee62c4c91502c
2025-02-11 03:12:16.821 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.198622S
2025-02-11 03:12:17.163 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:12:17.204 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:12:17.226 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:12:17.406 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:12:17.426 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:12:17.538 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f76b200
2025-02-11 03:12:17.539 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:12:17.568 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:12:17.568 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:12:17.579 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:12:18.161 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:12:18.268 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:12:18.455 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:12:18.946 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:12:19.311 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:12:19.389 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49441
2025-02-11 03:12:19.417 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49441
2025-02-11 03:12:19.833 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:12:20.251 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:12:20.252 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:12:20.260 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:12:20.269 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 17 ms
2025-02-11 03:12:20.376 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 14.97 seconds (process running for 21.107)
2025-02-11 03:12:23.749 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:12:23.751 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:12:23.754 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:13:24.513 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:13:24.664 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:13:25.068 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1050 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:13:25.069 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:13:25.490 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:13:25.490 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:13:25.509 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:13:25.511 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:13:25.511 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:13:25.708 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 196 ms. Found 9 JPA repository interfaces.
2025-02-11 03:13:26.006 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:13:26.007 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:13:26.024 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.024 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.024 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:13:26.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:13:26.170 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:13:26.177 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:13:26.183 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:13:26.357 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:13:26.517 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:13:26.518 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:13:26.535 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:13:26.550 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:13:26.653 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:13:26.716 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f3eb6bd43bfba94927e1dc7f171d5a86545a2ff12308772694b899b9323d86a1
2025-02-11 03:13:26.896 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.345847S
2025-02-11 03:13:26.899 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:13:26.899 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:13:26.900 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:13:26.901 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:13:26.949 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7f092ea2a8fb8b59895456ddb54553ead155e6000ab6b79c45486a3778a80bf1
2025-02-11 03:13:27.105 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49503/hhplus using query 'SELECT 1'
2025-02-11 03:13:33.561 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.659424S
2025-02-11 03:13:33.561 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49503/hhplus)
2025-02-11 03:13:33.562 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:13:33.581 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: ccf67b06dec1aad6513b04ad63b68769b492c68d20873cbff0303e77907b840f
2025-02-11 03:13:33.803 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.241078S
2025-02-11 03:13:34.128 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:13:34.166 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:13:34.186 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:13:34.359 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:13:34.382 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:13:34.468 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@10a711c7
2025-02-11 03:13:34.469 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:13:34.494 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:13:34.495 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:13:34.508 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:13:35.104 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:13:35.217 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:13:35.408 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:13:35.827 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:13:36.179 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:13:36.254 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49562
2025-02-11 03:13:36.280 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49562
2025-02-11 03:13:36.672 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:13:37.090 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:13:37.091 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:13:37.096 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:13:37.105 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-02-11 03:13:37.211 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.457 seconds (process running for 18.566)
2025-02-11 03:13:40.568 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:13:40.570 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:13:40.574 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:15:35.111 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:15:35.235 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:15:35.566 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1086 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:15:35.566 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:15:36.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:15:36.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:15:36.050 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:15:36.052 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:15:36.052 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:15:36.246 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 193 ms. Found 9 JPA repository interfaces.
2025-02-11 03:15:36.505 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:15:36.506 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:15:36.523 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.523 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.524 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.524 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.524 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.524 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.524 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.525 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.525 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:15:36.525 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:15:36.661 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:15:36.664 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:15:36.671 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:15:36.850 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:15:37.011 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:15:37.012 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:15:37.025 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:15:37.042 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:15:37.154 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:15:37.215 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 73b9cbb692717e9ce82a582137881b80dbdd513f4a52c2766dba8cc22c1b71a2
2025-02-11 03:15:37.392 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.35023S
2025-02-11 03:15:37.395 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:15:37.396 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:15:37.396 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:15:37.399 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:15:37.438 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 851f1e5b0ceddfe2e454dcc084b60e29989b0efccba372155a806b1d100b496e
2025-02-11 03:15:37.600 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49624/hhplus using query 'SELECT 1'
2025-02-11 03:15:44.074 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.674922S
2025-02-11 03:15:44.074 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49624/hhplus)
2025-02-11 03:15:44.075 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:15:44.091 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: f95d2fb123a97b3cd4f5bf5da48175b069d7c813400e6e885bc2e21e1028b3fb
2025-02-11 03:15:44.295 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.219964S
2025-02-11 03:15:44.622 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:15:44.656 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:15:44.680 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:15:44.848 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:15:44.867 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:15:44.956 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@10a711c7
2025-02-11 03:15:44.957 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:15:44.980 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:15:44.981 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:15:44.992 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:15:45.557 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:15:45.664 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:15:45.868 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:15:46.265 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:15:46.616 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:15:46.697 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49683
2025-02-11 03:15:46.728 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49683
2025-02-11 03:15:47.131 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:15:47.558 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:15:47.560 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:15:47.565 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:15:47.576 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 16 ms
2025-02-11 03:15:47.684 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.364 seconds (process running for 18.441)
2025-02-11 03:15:51.018 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:15:51.020 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:15:51.024 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:16:26.945 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:16:27.057 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:16:27.400 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1128 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:16:27.400 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:16:27.835 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:16:27.835 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:16:27.853 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:16:27.855 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:16:27.855 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:16:28.047 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 191 ms. Found 9 JPA repository interfaces.
2025-02-11 03:16:28.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:16:28.299 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:16:28.316 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.316 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.316 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.316 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.316 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.317 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.317 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.317 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.317 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:16:28.317 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-02-11 03:16:28.442 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:16:28.446 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:16:28.451 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:16:28.615 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:16:28.786 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:16:28.787 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:16:28.800 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:16:28.826 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:16:28.919 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:16:28.989 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: d9b786740f365b99303f0d2a03ffd15d1ee6747489e922b6e7c271a8415e5168
2025-02-11 03:16:29.179 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.352213S
2025-02-11 03:16:29.182 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:16:29.182 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:16:29.182 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:16:29.187 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:16:29.224 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 9ec6fb68318db7f24a9d2f9e26192b1360c791cefde02a21164187f6f58b8dc3
2025-02-11 03:16:29.381 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49746/hhplus using query 'SELECT 1'
2025-02-11 03:16:34.754 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT5.5676S
2025-02-11 03:16:34.754 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49746/hhplus)
2025-02-11 03:16:34.755 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:16:34.772 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 9d4e8a34f04fabf1241b1ec6ca22e7f23e316ec3a331d8beb705c9542c632e94
2025-02-11 03:16:34.996 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.241228S
2025-02-11 03:16:35.325 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:16:35.356 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:16:35.376 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:16:35.539 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:16:35.556 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:16:35.641 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ffacb38
2025-02-11 03:16:35.642 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:16:35.665 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:16:35.665 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:16:35.675 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:16:36.221 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:16:36.321 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:16:36.516 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:16:36.960 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:16:37.337 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:16:37.411 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49794
2025-02-11 03:16:37.439 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49794
2025-02-11 03:16:37.839 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:16:38.247 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:16:38.247 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:16:38.251 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:16:38.259 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 03:16:38.353 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.205 seconds (process running for 17.237)
2025-02-11 03:16:41.699 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:16:41.701 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:16:41.705 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:18:33.914 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:18:34.035 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:18:34.354 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1171 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:18:34.354 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:18:34.847 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:18:34.847 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:18:34.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2025-02-11 03:18:34.872 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:18:34.872 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:18:35.088 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 215 ms. Found 9 JPA repository interfaces.
2025-02-11 03:18:35.379 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:18:35.380 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:18:35.394 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.394 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:18:35.395 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-02-11 03:18:35.548 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:18:35.551 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:18:35.569 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:18:35.741 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:18:35.909 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:18:35.910 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:18:35.924 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:18:35.938 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:18:36.052 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:18:36.118 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 1e8ee868ad5785ed85ae49773fa2f0829844d1a8b9778432e4620cd5d4d15447
2025-02-11 03:18:36.299 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.360536S
2025-02-11 03:18:36.302 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:18:36.302 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:18:36.302 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:18:36.304 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:18:36.345 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 15c38a080d92d02d8763813508e848d6f99149c86f33f7fadcbf77755066e5e8
2025-02-11 03:18:36.495 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49856/hhplus using query 'SELECT 1'
2025-02-11 03:18:41.919 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT5.614734S
2025-02-11 03:18:41.919 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49856/hhplus)
2025-02-11 03:18:41.920 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:18:41.941 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: eb61f022f8bcc3643f253f61ff9a68872ab309c07a2967d328b130a410d14328
2025-02-11 03:18:42.154 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.233703S
2025-02-11 03:18:42.497 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:18:42.536 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:18:42.558 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:18:42.742 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:18:42.762 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:18:42.847 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ee4eba0
2025-02-11 03:18:42.848 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:18:42.874 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:18:42.874 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:18:42.885 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:18:43.512 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:18:43.632 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:18:43.841 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:18:44.230 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:18:44.579 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:18:44.660 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49905
2025-02-11 03:18:44.692 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49905
2025-02-11 03:18:45.088 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:18:45.480 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:18:45.481 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:18:45.485 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:18:45.494 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 03:18:45.598 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 11.471 seconds (process running for 17.534)
2025-02-11 03:18:49.184 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:18:49.187 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:18:49.191 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:20:19.222 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:20:19.372 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:20:19.702 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1238 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:20:19.703 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:20:20.234 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:20:20.234 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:20:20.253 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:20:20.254 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:20:20.254 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:20:20.449 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 193 ms. Found 9 JPA repository interfaces.
2025-02-11 03:20:20.752 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:20:20.753 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:20:20.768 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.768 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.769 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.770 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:20:20.770 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:20:20.895 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:20:20.897 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:20:20.903 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:20:21.063 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:20:21.225 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:20:21.226 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:20:21.240 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:20:21.255 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:20:21.354 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:20:21.430 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 753ca1b4b2806f1500d7cc5097ec872885e700d42b764b0b1c1b2576210faa80
2025-02-11 03:20:21.622 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.36713S
2025-02-11 03:20:21.626 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:20:21.626 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:20:21.626 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:20:21.629 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:20:21.673 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: c28df07524319190c0e888b02f65fec472b79155ca53850f97ad1438c683c3f4
2025-02-11 03:20:21.830 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49971/hhplus using query 'SELECT 1'
2025-02-11 03:20:28.542 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.913751S
2025-02-11 03:20:28.543 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49971/hhplus)
2025-02-11 03:20:28.543 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:20:28.562 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 349f3292993c06ed828457d8f22c535b6928b05c1917b75ef26fc115c9f0edcf
2025-02-11 03:20:28.785 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.241333S
2025-02-11 03:20:29.152 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:20:29.190 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:20:29.213 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:20:29.394 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:20:29.414 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:20:29.500 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@87ffc8f
2025-02-11 03:20:29.501 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:20:29.525 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:20:29.526 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:20:29.537 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:20:30.236 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:20:30.388 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:20:30.602 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:20:31.078 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:20:31.366 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:20:31.446 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50032
2025-02-11 03:20:31.482 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50032
2025-02-11 03:20:31.999 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:20:32.425 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:20:32.426 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:20:32.430 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:20:32.438 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 03:20:32.543 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.067 seconds (process running for 19.044)
2025-02-11 03:20:36.177 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:20:36.179 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:20:36.183 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:21:12.797 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:21:12.918 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:21:13.265 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1287 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:21:13.265 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:21:13.724 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:21:13.724 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:21:13.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:21:13.746 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:21:13.746 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:21:13.943 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 196 ms. Found 9 JPA repository interfaces.
2025-02-11 03:21:14.262 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:21:14.263 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:21:14.278 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.279 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.279 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.279 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.279 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.279 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.280 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.280 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.280 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:21:14.280 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:21:14.421 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:21:14.424 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:21:14.440 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:21:14.614 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:21:14.795 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:21:14.796 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:21:14.810 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:21:14.827 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:21:14.920 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:21:14.995 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 3495b28a1356edc7770b39f48fecdc150f0817e90c540f6f39810e53f266b22a
2025-02-11 03:21:15.173 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.346172S
2025-02-11 03:21:15.176 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:21:15.177 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:21:15.177 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:21:15.179 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:21:15.229 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7c7cf89f960dba6152c0d73b1da08bd28ebea033bbe5e85025b4e96c8053f0ad
2025-02-11 03:21:15.388 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50105/hhplus using query 'SELECT 1'
2025-02-11 03:21:22.062 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.88272S
2025-02-11 03:21:22.063 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50105/hhplus)
2025-02-11 03:21:22.063 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:21:22.082 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: d33e0049dd643c554d37c654ee377d7758dd707352ebca93e95da879b381d12b
2025-02-11 03:21:22.308 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.244313S
2025-02-11 03:21:22.678 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:21:22.720 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:21:22.742 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:21:22.931 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:21:22.953 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:21:23.042 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@597c62ba
2025-02-11 03:21:23.043 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:21:23.069 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:21:23.070 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:21:23.082 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:21:23.695 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:21:23.821 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:21:24.043 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:21:24.467 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:21:24.778 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:21:24.865 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50164
2025-02-11 03:21:24.895 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50164
2025-02-11 03:21:25.419 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:21:25.858 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:21:25.858 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:21:25.862 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:21:25.870 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 03:21:25.972 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.948 seconds (process running for 18.974)
2025-02-11 03:21:29.549 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:21:29.551 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:21:29.554 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 03:23:20.545 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 03:23:20.656 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-11 03:23:20.983 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1361 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 03:23:20.984 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-11 03:23:21.412 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:23:21.412 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:23:21.420 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 03:23:21.422 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:23:21.422 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 03:23:21.599 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 175 ms. Found 9 JPA repository interfaces.
2025-02-11 03:23:21.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 03:23:21.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 03:23:21.883 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.883 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.883 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.883 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 03:23:21.884 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 03:23:22.005 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 03:23:22.008 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 03:23:22.023 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 03:23:22.189 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 03:23:22.372 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 03:23:22.373 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 03:23:22.387 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 03:23:22.406 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 03:23:22.511 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 03:23:22.585 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: d7293b9e82352d895a9d937388858952fde37f2e0d8abd4d33be573a6deb613d
2025-02-11 03:23:22.764 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.357817S
2025-02-11 03:23:22.767 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 03:23:22.767 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 03:23:22.768 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 03:23:22.770 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 03:23:22.820 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 299f7fd201546cf35dcadabc4b955faa46da2e9db2c6e0d7b4ae96d760999c83
2025-02-11 03:23:22.978 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50225/hhplus using query 'SELECT 1'
2025-02-11 03:23:29.627 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.857316S
2025-02-11 03:23:29.627 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50225/hhplus)
2025-02-11 03:23:29.628 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 03:23:29.650 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 9af59d32ba846fdaf4a1076ecf30d356e6c17d0563bfc6ffb6e99e053d2d721c
2025-02-11 03:23:29.871 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.242869S
2025-02-11 03:23:30.214 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 03:23:30.253 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 03:23:30.274 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 03:23:30.450 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 03:23:30.470 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 03:23:30.603 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2474aa67
2025-02-11 03:23:30.605 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 03:23:30.641 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 03:23:30.641 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 03:23:30.655 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 03:23:31.304 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 03:23:31.417 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:23:31.627 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 03:23:32.032 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 03:23:32.320 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 03:23:32.400 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50285
2025-02-11 03:23:32.426 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50285
2025-02-11 03:23:32.929 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 03:23:33.372 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 03:23:33.372 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 03:23:33.377 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 03:23:33.386 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-02-11 03:23:33.492 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 12.752 seconds (process running for 18.771)
2025-02-11 03:23:37.185 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 03:23:37.188 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 03:23:37.192 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 14:50:59.508 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 14:50:59.666 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 14:51:00.010 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 1357 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 14:51:00.010 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 14:51:00.481 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:51:00.481 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 14:51:00.500 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 14:51:00.502 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:51:00.502 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 14:51:00.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 188 ms. Found 9 JPA repository interfaces.
2025-02-11 14:51:01.007 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:51:01.008 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 14:51:01.024 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:51:01.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 14:51:01.169 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 14:51:01.171 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 14:51:01.176 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 14:51:01.343 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 14:51:01.518 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 14:51:01.519 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 14:51:01.534 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 14:51:01.549 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 14:51:01.709 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 14:51:01.787 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 938d11a2b6990a295ab9cd060e7d4148524b42659cd1127cab00bf4118213d5d
2025-02-11 14:51:02.041 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.491372S
2025-02-11 14:51:02.045 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 14:51:02.045 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 14:51:02.045 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 14:51:02.048 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 14:51:02.109 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: aa8fec8fa56202148ada4204ecd37fc6290e9f4980c3ad14d9bcb8aeaef6609e
2025-02-11 14:51:02.282 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49824/hhplus using query 'SELECT 1'
2025-02-11 14:51:09.200 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.152626S
2025-02-11 14:51:09.201 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49824/hhplus)
2025-02-11 14:51:09.201 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 14:51:09.225 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: d78694c7f6b68047572e40d904151d217b9f82e3dcaa9f2b1350159c7275cb3c
2025-02-11 14:51:09.440 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.238332S
2025-02-11 14:51:09.836 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 14:51:09.880 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 14:51:09.904 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 14:51:10.106 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 14:51:10.127 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 14:51:10.228 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ffacb38
2025-02-11 14:51:10.229 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 14:51:10.256 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 14:51:10.257 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 14:51:10.268 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 14:51:10.878 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 14:51:11.002 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 14:51:11.201 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 14:51:11.655 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 14:51:11.959 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 14:51:12.055 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49886
2025-02-11 14:51:12.083 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49886
2025-02-11 14:51:12.592 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 14:51:13.033 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 14:51:13.034 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 14:51:13.038 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 14:51:13.047 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 14:51:13.159 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 13.38 seconds (process running for 19.475)
2025-02-11 14:51:16.506 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 14:51:16.509 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 14:51:16.513 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 14:53:00.772 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 14:53:00.900 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 14:53:01.271 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 1400 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 14:53:01.272 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 14:53:01.717 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:53:01.717 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 14:53:01.735 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 14:53:01.737 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:53:01.737 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 14:53:01.924 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 186 ms. Found 9 JPA repository interfaces.
2025-02-11 14:53:02.234 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 14:53:02.235 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 14:53:02.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 14:53:02.391 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 14:53:02.393 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 14:53:02.398 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 14:53:02.573 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 14:53:02.749 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 14:53:02.750 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 14:53:02.766 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 14:53:02.782 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 14:53:02.889 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 14:53:02.954 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 20ec11cfb45fff9a33d10ca7020bbb84cce57b60a15dd2e0b2e4e6240865bd35
2025-02-11 14:53:03.143 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.360641S
2025-02-11 14:53:03.146 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 14:53:03.146 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 14:53:03.146 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 14:53:03.149 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 14:53:03.193 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 3beca419a94e3823105c52733d253b328c7d9de9030faaa9d6120933fbf970df
2025-02-11 14:53:03.355 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49933/hhplus using query 'SELECT 1'
2025-02-11 14:53:09.950 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.800955S
2025-02-11 14:53:09.950 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49933/hhplus)
2025-02-11 14:53:09.951 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 14:53:09.972 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 24795e01395488c64fe9919724f1fa6490b6592a9b068b63fca46e157fd23c17
2025-02-11 14:53:10.199 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.247841S
2025-02-11 14:53:10.540 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 14:53:10.576 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 14:53:10.596 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 14:53:10.781 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 14:53:10.802 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 14:53:10.886 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f90295b
2025-02-11 14:53:10.887 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 14:53:10.912 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 14:53:10.912 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 14:53:10.923 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 14:53:11.509 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 14:53:11.628 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 14:53:11.841 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 14:53:12.241 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 14:53:12.541 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 14:53:12.619 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49992
2025-02-11 14:53:12.645 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49992
2025-02-11 14:53:13.127 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 14:53:13.539 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 14:53:13.539 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 14:53:13.543 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 14:53:13.551 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 14:53:13.647 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 12.628 seconds (process running for 18.69)
2025-02-11 14:53:16.936 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 14:53:16.938 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 14:53:16.942 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:30:21.483 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:30:21.605 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 15:30:21.946 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 1702 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:30:21.946 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:30:22.441 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:30:22.441 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:30:22.449 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:30:22.450 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:30:22.451 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:30:22.646 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 194 ms. Found 9 JPA repository interfaces.
2025-02-11 15:30:22.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:30:22.953 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:30:22.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:30:22.970 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 15:30:23.104 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:30:23.107 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:30:23.122 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:30:23.303 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:30:23.473 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:30:23.474 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:30:23.480 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:30:23.496 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:30:23.605 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:30:25.038 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 2dfe297ddc497b7acd949ccfba03612d5dd55931ca25cf9affba30d44694eedc
2025-02-11 15:30:25.711 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.215334S
2025-02-11 15:30:25.718 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:30:25.718 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:30:25.718 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:30:25.720 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:30:25.770 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 9ba57b3d4dd61caffdf67808b60dd73c3042bfdf1700276766474a7060bb7bde
2025-02-11 15:30:25.941 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50572/hhplus using query 'SELECT 1'
2025-02-11 15:30:32.833 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.112784S
2025-02-11 15:30:32.834 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50572/hhplus)
2025-02-11 15:30:32.834 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:30:32.866 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: dbb092c9b67731d5b2a5f93ac57d9cb8f836b728dad4bdd1b72af9f68a879b18
2025-02-11 15:30:33.204 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.369731S
2025-02-11 15:30:33.618 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:30:33.662 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:30:33.684 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:30:33.884 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:30:33.906 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:30:33.991 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f742888
2025-02-11 15:30:33.992 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:30:34.017 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:30:34.018 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:30:34.029 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:30:34.635 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:30:34.764 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:30:34.989 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:30:35.427 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:30:35.756 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:30:35.855 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50635
2025-02-11 15:30:35.886 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50635
2025-02-11 15:30:36.408 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:30:36.848 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:30:36.848 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:30:36.853 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:30:36.861 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 15:30:36.964 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 15.249 seconds (process running for 21.295)
2025-02-11 15:30:40.328 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:30:40.331 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:30:40.344 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:31:53.143 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:31:53.262 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 15:31:53.614 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 1735 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:31:53.614 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:31:54.105 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:31:54.106 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:31:54.116 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:31:54.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:31:54.118 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:31:54.315 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 196 ms. Found 9 JPA repository interfaces.
2025-02-11 15:31:54.621 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:31:54.622 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:31:54.639 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.639 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.639 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.640 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:31:54.641 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 15:31:54.778 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:31:54.780 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:31:54.787 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:31:54.954 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:31:55.137 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:31:55.141 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:31:55.154 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:31:55.170 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:31:55.274 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:31:55.342 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 60e5344c5a03e1ca7a96a218c6a1d8afc9b8325b4aef2e468849b0fb6966fbb4
2025-02-11 15:31:55.541 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.371475S
2025-02-11 15:31:55.545 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:31:55.545 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:31:55.545 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:31:55.548 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:31:55.599 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: edff5da11a74ddc6854a561aebd39c1a77b5a2fcbc74d58a11dadfc92ba6dc2f
2025-02-11 15:31:55.708 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50682/hhplus using query 'SELECT 1'
2025-02-11 15:32:01.372 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT5.824223S
2025-02-11 15:32:01.372 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50682/hhplus)
2025-02-11 15:32:01.373 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:32:01.393 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 7c4e3260b411b7447426b485b182ea5bdb46ea0ec30d51b5a41ae9494e8f40a0
2025-02-11 15:32:01.626 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.253005S
2025-02-11 15:32:01.993 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:32:02.028 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:32:02.050 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:32:02.236 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:32:02.257 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:32:02.342 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@34d15476
2025-02-11 15:32:02.343 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:32:02.367 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:32:02.368 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:32:02.378 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:32:02.969 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:32:03.096 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:32:03.292 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:32:03.724 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:32:04.020 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:32:04.100 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50734
2025-02-11 15:32:04.140 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50734
2025-02-11 15:32:04.625 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:32:05.037 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:32:05.037 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:32:05.041 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:32:05.048 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-02-11 15:32:05.145 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 11.773 seconds (process running for 17.816)
2025-02-11 15:32:08.431 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:32:08.433 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:32:08.437 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:36:18.350 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:36:18.473 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 15:36:18.851 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 1777 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:36:18.852 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:36:19.298 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:19.299 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:36:19.318 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:36:19.320 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:19.320 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:36:19.514 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 192 ms. Found 9 JPA repository interfaces.
2025-02-11 15:36:19.814 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:19.815 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:36:19.832 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.832 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.832 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.832 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.833 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.833 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.833 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.833 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.834 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:19.834 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 15:36:19.971 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:36:19.973 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:36:19.978 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:36:20.143 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:36:20.320 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:36:20.321 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:36:20.337 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:36:20.352 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:36:20.463 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:36:20.531 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 59fd956a29babb415a066b2d494e822347f221a376b46be5fad08f15234c518a
2025-02-11 15:36:20.725 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.37379S
2025-02-11 15:36:20.729 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:36:20.729 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:36:20.729 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:36:20.732 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:36:20.785 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7031050f06fb7121aeb4ec1a327a1a5a278314980c9595b562b49603965ee63c
2025-02-11 15:36:20.902 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50793/hhplus using query 'SELECT 1'
2025-02-11 15:36:27.635 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.902733S
2025-02-11 15:36:27.635 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50793/hhplus)
2025-02-11 15:36:27.636 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:36:27.656 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: e59e663e37197de5d5ad5d166eaa5c15aff990a483909d11ab3da122d6678f0f
2025-02-11 15:36:27.892 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.256465S
2025-02-11 15:36:28.246 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:36:28.285 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:36:28.306 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:36:28.483 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:36:28.506 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:36:28.586 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@24045d7a
2025-02-11 15:36:28.588 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:36:28.613 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:36:28.613 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:36:28.624 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:36:29.219 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:36:29.339 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:36:29.558 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:36:29.961 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:36:30.263 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:36:30.369 [redisson-netty-4-8]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50853
2025-02-11 15:36:30.402 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50853
2025-02-11 15:36:30.928 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:36:31.355 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:36:31.355 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:36:31.360 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:36:31.369 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-02-11 15:36:31.479 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 12.869 seconds (process running for 18.906)
2025-02-11 15:36:34.761 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:36:34.763 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:36:34.766 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:36:57.180 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:36:57.307 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:36:57.628 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 1826 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:36:57.629 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:36:58.138 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:58.139 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:36:58.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:36:58.151 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:58.151 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:36:58.349 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 196 ms. Found 9 JPA repository interfaces.
2025-02-11 15:36:58.672 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:36:58.673 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:36:58.690 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.690 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.690 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.690 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.690 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:36:58.691 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 15:36:58.823 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:36:58.826 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:36:58.841 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:36:59.020 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:36:59.195 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:36:59.196 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:36:59.210 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:36:59.226 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:36:59.338 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:36:59.414 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: ff8c9aeaf4e013781f04a554837274410e49e237c8d1729da98e5139eba2e4a3
2025-02-11 15:36:59.601 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.374584S
2025-02-11 15:36:59.604 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:36:59.604 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:36:59.605 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:36:59.607 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:36:59.673 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7a6dc9600bf3571f747c2e9c2ab98930f64d55dc5fcf86c0f462edd91432f8bd
2025-02-11 15:36:59.852 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50901/hhplus using query 'SELECT 1'
2025-02-11 15:37:06.486 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.87939S
2025-02-11 15:37:06.487 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50901/hhplus)
2025-02-11 15:37:06.488 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:37:06.510 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 9f57159b17e215a39232aeb6b0403e787f96fbfcb160aabeac8e31ad200f07bb
2025-02-11 15:37:06.675 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.186984S
2025-02-11 15:37:07.030 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:37:07.066 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:37:07.089 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:37:07.274 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:37:07.295 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:37:07.387 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@41f9a44b
2025-02-11 15:37:07.388 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:37:07.415 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:37:07.416 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:37:07.427 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:37:08.026 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:37:08.143 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:37:08.339 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:37:08.794 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:37:09.112 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:37:09.195 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50961
2025-02-11 15:37:09.224 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50961
2025-02-11 15:37:09.757 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:37:10.185 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:37:10.185 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:37:10.190 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:37:10.198 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 15:37:10.303 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 12.901 seconds (process running for 18.93)
2025-02-11 15:37:13.659 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:37:13.661 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:37:13.664 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:41:06.279 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:41:06.413 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:41:06.738 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 1894 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:41:06.739 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:41:07.184 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:41:07.184 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:41:07.204 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:41:07.215 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:41:07.215 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:41:07.396 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 179 ms. Found 9 JPA repository interfaces.
2025-02-11 15:41:07.702 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:41:07.703 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:41:07.718 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.719 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.720 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.720 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:41:07.720 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 15:41:07.860 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:41:07.863 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:41:07.867 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:41:08.033 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:41:08.208 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:41:08.209 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:41:08.223 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:41:08.241 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:41:08.347 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:41:08.421 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: e5d2d804a870dd253c54ac1fe05aeccb2d4b0281489d8581f358b7cafe6dd2bf
2025-02-11 15:41:08.620 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.378885S
2025-02-11 15:41:08.623 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:41:08.623 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:41:08.624 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:41:08.627 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:41:08.682 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 74bd923b6ad98f8a0e7e6fe03203362b41ebea88b92c2e1f036e6da55c5ba514
2025-02-11 15:41:08.798 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51025/hhplus using query 'SELECT 1'
2025-02-11 15:41:15.617 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.99076S
2025-02-11 15:41:15.618 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51025/hhplus)
2025-02-11 15:41:15.619 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:41:15.642 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 7d45d4a6afb1bb0ad22fceab162f2b4cb7c51ef34c485ba784f1e14b3c792a5d
2025-02-11 15:41:15.835 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.216343S
2025-02-11 15:41:16.209 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:41:16.251 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:41:16.274 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:41:16.469 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:41:16.491 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:41:16.584 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f90295b
2025-02-11 15:41:16.585 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:41:16.609 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:41:16.610 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:41:16.620 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:41:17.207 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:41:17.327 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:41:17.560 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:41:17.989 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:41:18.294 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:41:18.372 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51087
2025-02-11 15:41:18.400 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51087
2025-02-11 15:41:18.923 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:41:19.339 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:41:19.340 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:41:19.344 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:41:19.351 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-02-11 15:41:19.451 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 12.933 seconds (process running for 19.007)
2025-02-11 15:41:22.761 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:41:22.764 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:41:22.768 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:44:24.825 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:44:24.947 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:44:25.289 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 1933 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:44:25.290 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:44:25.723 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:44:25.724 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:44:25.742 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:44:25.743 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:44:25.744 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:44:25.927 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 181 ms. Found 9 JPA repository interfaces.
2025-02-11 15:44:26.233 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:44:26.234 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.251 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:44:26.252 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 15:44:26.387 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:44:26.389 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:44:26.404 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:44:26.573 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:44:26.757 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:44:26.758 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:44:26.774 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:44:26.792 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:44:26.898 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:44:26.973 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 1dc1e7384ff2bacb9025ff874ac589a746ff8112b2b9e6e9de5001e6aadebf17
2025-02-11 15:44:27.165 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.372418S
2025-02-11 15:44:27.168 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:44:27.168 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:44:27.168 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:44:27.171 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:44:27.241 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: e5d69668f0e46687c2a5b5ac235cdbee334e3557798362de14f6977ee637a8a6
2025-02-11 15:44:27.357 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51152/hhplus using query 'SELECT 1'
2025-02-11 15:44:34.073 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.901835S
2025-02-11 15:44:34.073 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51152/hhplus)
2025-02-11 15:44:34.074 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:44:34.096 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 5b968312a0e8a2411d2efa5141c06c284a77a2362b24fc687c1fdec1e5df1702
2025-02-11 15:44:34.311 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.237407S
2025-02-11 15:44:34.693 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:44:34.731 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:44:34.753 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:44:34.940 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:44:34.966 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:44:35.051 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ffacb38
2025-02-11 15:44:35.052 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:44:35.077 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:44:35.077 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:44:35.088 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:44:35.693 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:44:35.817 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:44:36.050 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:44:36.469 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:44:36.764 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:44:36.850 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51212
2025-02-11 15:44:36.876 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51212
2025-02-11 15:44:37.377 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:44:37.787 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:44:37.787 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:44:37.791 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:44:37.799 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 15:44:37.907 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 12.861 seconds (process running for 18.94)
2025-02-11 15:44:41.278 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:44:41.280 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:44:41.283 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:48:08.555 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:48:08.714 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:48:09.057 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 1980 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:48:09.058 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:48:09.520 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:09.520 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:48:09.538 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:48:09.540 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:09.541 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:48:09.722 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 180 ms. Found 9 JPA repository interfaces.
2025-02-11 15:48:10.041 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:10.042 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:48:10.057 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.057 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.057 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.057 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:10.058 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 15:48:10.201 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:48:10.203 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:48:10.208 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:48:10.376 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:48:10.553 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:48:10.554 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:48:10.569 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:48:10.585 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:48:10.698 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:48:10.769 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 1ea84cf45af6e093d5633e1bb08de3208b2504e20d50d38e2dfa7e15de5ab573
2025-02-11 15:48:10.960 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.375343S
2025-02-11 15:48:10.964 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:48:10.964 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:48:10.964 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:48:10.967 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:48:11.021 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 69b0b3f75b43e72520fef6a9f8a24bf12c78e920dadfad8af1634347e04eecae
2025-02-11 15:48:11.196 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51277/hhplus using query 'SELECT 1'
2025-02-11 15:48:16.824 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT5.856921S
2025-02-11 15:48:16.824 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51277/hhplus)
2025-02-11 15:48:16.825 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:48:16.846 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 203a1da8e1883c1450a75fd41454902371b797ed3a090fc9b9e5404da6b6f6f7
2025-02-11 15:48:17.066 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.241054S
2025-02-11 15:48:17.433 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:48:17.469 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:48:17.493 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:48:17.681 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:48:17.704 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:48:17.788 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@523ddffa
2025-02-11 15:48:17.789 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:48:17.814 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:48:17.814 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:48:17.825 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:48:18.414 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:48:18.536 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:48:18.725 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:48:19.181 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:48:19.483 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:48:19.563 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51328
2025-02-11 15:48:19.596 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51328
2025-02-11 15:48:20.084 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:48:20.496 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:48:20.497 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:48:20.501 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:48:20.510 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 15:48:20.615 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 11.796 seconds (process running for 17.906)
2025-02-11 15:48:23.925 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:48:23.929 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:48:23.932 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:48:56.677 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:48:56.804 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:48:57.152 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 2009 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:48:57.153 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:48:57.615 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:57.616 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:48:57.634 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:48:57.636 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:57.636 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:48:57.824 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 187 ms. Found 9 JPA repository interfaces.
2025-02-11 15:48:58.130 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:48:58.131 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.148 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:48:58.149 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 15:48:58.291 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:48:58.294 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:48:58.310 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:48:58.481 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:48:58.657 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:48:58.658 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:48:58.673 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:48:58.689 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:48:58.788 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:48:58.865 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: b6e10932621ac4e5473b85c19f7705a1493d91cce00b28e086bdd5530abdb8ae
2025-02-11 15:48:59.052 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.36295S
2025-02-11 15:48:59.055 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:48:59.055 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:48:59.056 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:48:59.058 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:48:59.121 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 13ce1c60411476fe4b28b111fb6d042af2e595a3afa952e865a0d035f874ba53
2025-02-11 15:48:59.250 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51377/hhplus using query 'SELECT 1'
2025-02-11 15:49:05.943 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.884987S
2025-02-11 15:49:05.944 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51377/hhplus)
2025-02-11 15:49:05.945 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:49:05.965 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 35aec64f5be8262b8b87e6d5c8c3757ebc088b4eecf929450a5dc1db7d972bed
2025-02-11 15:49:06.140 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.195328S
2025-02-11 15:49:06.523 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:49:06.563 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:49:06.588 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:49:06.785 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:49:06.810 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:49:06.894 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@10a711c7
2025-02-11 15:49:06.895 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:49:06.923 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:49:06.923 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:49:06.935 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:49:07.532 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:49:07.658 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:49:07.851 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:49:08.314 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:49:08.617 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:49:08.702 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51437
2025-02-11 15:49:08.729 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51437
2025-02-11 15:49:09.268 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:49:09.724 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:49:09.725 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:49:09.729 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:49:09.739 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 14 ms
2025-02-11 15:49:09.851 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 12.948 seconds (process running for 19.038)
2025-02-11 15:49:13.287 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:49:13.291 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:49:13.296 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:51:23.356 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:51:23.494 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:51:23.831 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 2052 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:51:23.832 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:51:24.285 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:51:24.286 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:51:24.304 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:51:24.305 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:51:24.306 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:51:24.493 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 186 ms. Found 9 JPA repository interfaces.
2025-02-11 15:51:24.793 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:51:24.794 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:51:24.809 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.810 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.811 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.811 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:51:24.811 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 15:51:24.947 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:51:24.950 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:51:24.966 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:51:25.133 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:51:25.310 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:51:25.311 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:51:25.330 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:51:25.345 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:51:25.440 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:51:25.508 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 0b34468261d444e2950ac603e9c8eea52368ff546001c365dc5c86e6a157a4f2
2025-02-11 15:51:25.730 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.384897S
2025-02-11 15:51:25.735 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:51:25.735 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:51:25.736 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:51:25.739 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:51:25.787 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: bc5456465ac82f8dc15e4c66be28b0220634b581dac4f3eeb64c4546443bffd3
2025-02-11 15:51:25.952 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51515/hhplus using query 'SELECT 1'
2025-02-11 15:51:32.692 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.952983S
2025-02-11 15:51:32.692 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51515/hhplus)
2025-02-11 15:51:32.693 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:51:32.714 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: a7acbc0ad61122dc141a96fe11c712fb50b5c7f8ed64486b3c661c37c8c12ebb
2025-02-11 15:51:32.930 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.237153S
2025-02-11 15:51:33.296 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:51:33.333 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:51:33.354 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:51:33.537 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:51:33.556 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:51:33.649 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@25227194
2025-02-11 15:51:33.650 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:51:33.675 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:51:33.675 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:51:33.686 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:51:34.274 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:51:34.410 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:51:34.635 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:51:35.061 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:51:35.368 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:51:35.452 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51575
2025-02-11 15:51:35.484 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51575
2025-02-11 15:51:35.998 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:51:36.424 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:51:36.424 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:51:36.429 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:51:36.439 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 15 ms
2025-02-11 15:51:36.547 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 12.955 seconds (process running for 19.04)
2025-02-11 15:51:40.183 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:51:40.184 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:51:40.188 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 15:53:47.258 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 15:53:47.383 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 15:53:47.733 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 2114 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 15:53:47.733 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 15:53:48.205 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:53:48.205 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:53:48.225 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 15:53:48.227 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:53:48.227 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 15:53:48.462 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 233 ms. Found 9 JPA repository interfaces.
2025-02-11 15:53:48.795 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 15:53:48.796 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.813 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.814 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.814 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.814 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 15:53:48.814 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 15:53:48.963 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 15:53:48.965 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 15:53:48.981 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 15:53:49.167 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 15:53:49.348 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 15:53:49.349 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 15:53:49.365 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 15:53:49.388 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 15:53:49.496 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 15:53:49.575 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 3acfe297e9b218dd30afea9874cce704739b8c1fbeb6e021db053d3e58f03095
2025-02-11 15:53:49.749 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.361254S
2025-02-11 15:53:49.752 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 15:53:49.753 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 15:53:49.753 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 15:53:49.755 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 15:53:49.808 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 331e15aa31d8d204ee86047c6fb62800af9961efe3d90fa98e3447a3cac9553d
2025-02-11 15:53:49.970 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51647/hhplus using query 'SELECT 1'
2025-02-11 15:53:56.694 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.938572S
2025-02-11 15:53:56.694 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51647/hhplus)
2025-02-11 15:53:56.695 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 15:53:56.718 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: aa11de6dd7a61858e8ff614f2826a29a28edd44b9c7ac36ca79705ff8d604373
2025-02-11 15:53:56.937 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.241589S
2025-02-11 15:53:57.307 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 15:53:57.342 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 15:53:57.363 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 15:53:57.539 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 15:53:57.564 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 15:53:57.652 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6a95fa85
2025-02-11 15:53:57.653 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 15:53:57.677 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 15:53:57.678 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 15:53:57.689 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 15:53:58.274 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 15:53:58.404 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:53:58.595 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 15:53:59.050 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 15:53:59.359 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 15:53:59.442 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:51707
2025-02-11 15:53:59.475 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:51707
2025-02-11 15:53:59.996 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 15:54:00.419 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 15:54:00.420 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 15:54:00.424 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 15:54:00.432 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 15:54:00.540 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 13.056 seconds (process running for 19.089)
2025-02-11 15:54:04.162 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 15:54:04.165 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 15:54:04.170 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 16:21:09.520 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 16:21:09.643 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-11 16:21:09.997 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Starting OrderFacadeConcurrencyIntegrationTest using Java 17.0.14 with PID 2396 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 16:21:09.997 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - The following 1 profile is active: "test"
2025-02-11 16:21:10.470 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:21:10.470 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:21:10.489 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 16:21:10.491 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:21:10.491 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:21:10.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 193 ms. Found 9 JPA repository interfaces.
2025-02-11 16:21:10.992 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:21:10.993 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 16:21:11.010 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.010 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.010 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.010 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.010 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.011 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.011 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.011 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.011 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:21:11.011 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 16:21:11.151 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 16:21:11.153 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 16:21:11.161 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 16:21:11.332 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 16:21:11.501 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 16:21:11.502 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 16:21:11.509 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 16:21:11.525 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 16:21:11.632 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 16:21:13.084 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 965dcf71dae94a28c98f1eca8c2adb034a60a3910bbaed5f127a99c4f7ce698a
2025-02-11 16:21:13.757 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.231694S
2025-02-11 16:21:13.760 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 16:21:13.760 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 16:21:13.761 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 16:21:13.763 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 16:21:13.814 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: de0f6bc64ccd533ee96938663a92291f6f3896d53753ccf6bf94c3b06b7ddccd
2025-02-11 16:21:13.979 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:51965/hhplus using query 'SELECT 1'
2025-02-11 16:21:20.866 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.102795S
2025-02-11 16:21:20.866 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:51965/hhplus)
2025-02-11 16:21:20.867 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 16:21:20.892 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: b17e6c2c4af096bfecb7d61bbccf90c0885daefbdb2dd26664151a230a9d8c11
2025-02-11 16:21:21.123 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.256003S
2025-02-11 16:21:21.462 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 16:21:21.497 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 16:21:21.518 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 16:21:21.696 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 16:21:21.716 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 16:21:21.803 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@27b7716d
2025-02-11 16:21:21.804 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 16:21:21.829 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 16:21:21.829 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 16:21:21.839 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 16:21:22.430 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 16:21:22.556 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:21:22.748 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 16:21:23.186 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 16:21:23.505 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 16:21:23.586 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:52027
2025-02-11 16:21:23.614 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:52027
2025-02-11 16:21:24.109 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 16:21:24.527 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 16:21:24.527 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 16:21:24.531 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 16:21:24.540 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-11 16:21:24.648 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest - Started OrderFacadeConcurrencyIntegrationTest in 14.899 seconds (process running for 20.93)
2025-02-11 16:21:28.038 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:21:28.041 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 16:21:28.047 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 16:22:07.361 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 16:22:07.492 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 16:22:07.865 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 2424 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 16:22:07.866 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 16:22:08.324 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:22:08.324 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:22:08.344 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 16:22:08.346 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:22:08.346 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:22:08.539 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 191 ms. Found 9 JPA repository interfaces.
2025-02-11 16:22:08.849 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:22:08.850 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.866 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.867 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.867 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.867 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:22:08.867 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-02-11 16:22:08.998 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 16:22:09.000 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 16:22:09.004 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 16:22:09.168 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 16:22:09.345 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 16:22:09.346 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 16:22:09.359 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 16:22:09.377 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 16:22:09.473 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 16:22:09.547 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 9c6ab6a2af586c2348f7f73e9fbe31faf3ac124893784a28b01cd9202e009ca1
2025-02-11 16:22:09.734 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.357201S
2025-02-11 16:22:09.738 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 16:22:09.738 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 16:22:09.738 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 16:22:09.740 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 16:22:09.783 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 70ddbb0e6f0d6fc44bc91815ccd8b2ae1b38d5d91a466b5f5e0f2dac7c4bcdbe
2025-02-11 16:22:09.949 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:52077/hhplus using query 'SELECT 1'
2025-02-11 16:22:16.529 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.788353S
2025-02-11 16:22:16.529 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:52077/hhplus)
2025-02-11 16:22:16.530 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 16:22:16.553 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: d937d3fb558542caf6ed582f790a8b93150a16bef1c31b4113c77e85e3cb8353
2025-02-11 16:22:16.730 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.200493S
2025-02-11 16:22:17.087 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 16:22:17.126 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 16:22:17.148 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 16:22:17.324 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 16:22:17.348 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 16:22:17.430 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6dbce0d1
2025-02-11 16:22:17.431 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 16:22:17.456 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 16:22:17.457 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 16:22:17.470 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 16:22:18.066 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 16:22:18.185 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:22:18.386 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 16:22:18.826 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 16:22:19.129 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 16:22:19.209 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:52137
2025-02-11 16:22:19.236 [redisson-netty-4-19]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:52137
2025-02-11 16:22:19.746 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 16:22:20.174 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 16:22:20.175 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 16:22:20.179 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 16:22:20.192 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 17 ms
2025-02-11 16:22:20.301 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 12.678 seconds (process running for 18.769)
2025-02-11 16:22:23.570 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:22:23.572 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 16:22:23.580 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-11 16:23:40.071 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-11 16:23:40.210 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-11 16:23:40.558 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Starting OrderFacadeIntegrationTest using Java 17.0.14 with PID 2477 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-11 16:23:40.559 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - The following 1 profile is active: "test"
2025-02-11 16:23:41.004 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:23:41.005 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:23:41.024 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-11 16:23:41.025 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:23:41.026 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-11 16:23:41.209 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 182 ms. Found 9 JPA repository interfaces.
2025-02-11 16:23:41.514 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-11 16:23:41.515 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-11 16:23:41.530 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.531 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.531 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.531 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.531 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.531 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.532 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.532 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.532 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-11 16:23:41.532 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-11 16:23:41.671 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-11 16:23:41.674 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-11 16:23:41.691 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-11 16:23:41.859 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-11 16:23:42.043 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-11 16:23:42.044 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-11 16:23:42.060 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-11 16:23:42.079 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-11 16:23:42.189 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-11 16:23:42.266 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 8b9f1ba68d4cb7a504bce708ce42993aa3ae978367ce845150a9a8ff286c7b2d
2025-02-11 16:23:42.483 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.403707S
2025-02-11 16:23:42.486 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-11 16:23:42.486 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-11 16:23:42.486 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-11 16:23:42.489 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-11 16:23:42.547 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: f58ad0a43e7e6d001e293faa5cb93d4c4c317b4dcc4142c5446108b2cedf9982
2025-02-11 16:23:42.718 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:52189/hhplus using query 'SELECT 1'
2025-02-11 16:23:49.437 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT6.948055S
2025-02-11 16:23:49.437 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:52189/hhplus)
2025-02-11 16:23:49.438 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-11 16:23:49.467 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 37fd0611c9fb7ac71a8205ad278ce6117ac50499bd0efa38eb5bbe44adbf9eeb
2025-02-11 16:23:49.694 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.255352S
2025-02-11 16:23:50.041 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-11 16:23:50.077 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-11 16:23:50.097 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-11 16:23:50.293 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-11 16:23:50.314 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-11 16:23:50.396 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@34d15476
2025-02-11 16:23:50.397 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-11 16:23:50.420 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-11 16:23:50.421 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-11 16:23:50.432 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-11 16:23:51.011 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-11 16:23:51.142 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:23:51.340 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-11 16:23:51.790 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-11 16:23:52.100 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-11 16:23:52.185 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:52249
2025-02-11 16:23:52.211 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:52249
2025-02-11 16:23:52.726 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-11 16:23:53.130 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-11 16:23:53.130 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-11 16:23:53.134 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-11 16:23:53.142 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-11 16:23:53.247 [Test worker]  INFO kr.hhplus.be.server.integration.OrderFacadeIntegrationTest - Started OrderFacadeIntegrationTest in 12.937 seconds (process running for 19.03)
2025-02-11 16:23:56.529 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-11 16:23:56.532 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-11 16:23:56.535 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
