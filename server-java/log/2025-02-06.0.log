2025-02-06 00:57:25.523 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 00:57:25.649 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 00:57:26.009 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1094 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 00:57:26.009 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-06 00:57:26.479 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:26.479 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 00:57:26.503 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-06 00:57:26.505 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:26.505 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 00:57:26.715 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 209 ms. Found 9 JPA repository interfaces.
2025-02-06 00:57:27.055 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:27.056 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 00:57:27.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.072 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.073 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.074 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:27.074 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 00:57:27.221 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 00:57:27.223 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 00:57:27.229 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 00:57:27.410 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 00:57:27.426 [Test worker]  INFO org.testcontainers.dockerclient.DockerMachineClientProviderStrategy - docker-machine executable was not found on PATH ([/opt/homebrew/opt/openjdk@17/bin, /opt/homebrew/bin, /opt/homebrew/sbin, /usr/local/bin, /System/Cryptexes/App/usr/bin, /usr/bin, /bin, /usr/sbin, /sbin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin, /var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin])
2025-02-06 00:57:27.426 [Test worker] ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration. Attempted configurations were:
	UnixSocketClientProviderStrategy: failed with exception InvalidConfigurationException (Could not find unix domain socket). Root cause NoSuchFileException (/var/run/docker.sock)
	DockerDesktopClientProviderStrategy: failed with exception NullPointerException (Cannot invoke "java.nio.file.Path.toString()" because the return value of "org.testcontainers.dockerclient.DockerDesktopClientProviderStrategy.getSocketPath()" is null)As no valid configuration was found, execution cannot continue.
See https://java.testcontainers.org/on_failure.html for more details.
2025-02-06 00:57:27.426 [Test worker]  WARN org.springframework.web.context.support.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Unable to load cache item
2025-02-06 00:57:27.498 [Test worker]  INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-06 00:57:27.527 [Test worker] ERROR org.springframework.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Unable to load cache item
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	... 114 common frames omitted
Caused by: java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$7(DockerClientProviderStrategy.java:274)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:265)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	... 123 common frames omitted
2025-02-06 00:57:27.534 [Test worker]  WARN org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [kr.hhplus.be.server.integration.CouponUseCaseTest@7b7aaaf6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@534bd131 testClass = kr.hhplus.be.server.integration.CouponUseCaseTest, locations = [], classes = [kr.hhplus.be.server.ServerApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@474179fa, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@716185fe, [ImportsContextCustomizer@41d2528f key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6adc5b9c, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6ddee60f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@c02670f, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@4ac8768e, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@606a1bc4, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@9a7de856], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy2/jdk.proxy2.$Proxy6.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: java.lang.IllegalStateException: Unable to load cache item
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:539)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 89 common frames omitted
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:559)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	... 114 common frames omitted
Caused by: java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$7(DockerClientProviderStrategy.java:274)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:265)
	at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:154)
	at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:196)
	at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:108)
	at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:109)
	at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:321)
	at kr.hhplus.be.server.TestcontainersConfiguration.<clinit>(TestcontainersConfiguration.java:28)
	... 123 common frames omitted
2025-02-06 00:57:47.268 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 00:57:47.399 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 00:57:47.746 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1209 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 00:57:47.746 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-06 00:57:48.207 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:48.207 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 00:57:48.239 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 JPA repository interfaces.
2025-02-06 00:57:48.241 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:48.241 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 00:57:48.432 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 189 ms. Found 9 JPA repository interfaces.
2025-02-06 00:57:48.742 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 00:57:48.743 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 00:57:48.758 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.759 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.759 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.759 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.759 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.759 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.760 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.760 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.760 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 00:57:48.760 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 00:57:48.902 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 00:57:48.904 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 00:57:48.909 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 00:57:49.076 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 00:57:49.260 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 00:57:49.261 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 00:57:49.275 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 00:57:49.290 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 00:57:49.398 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 00:57:49.494 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: af78f042e53308d8ac32ee47a3d05cae933f59a906014152b2e9d4c025059efc
2025-02-06 00:57:49.725 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.434221S
2025-02-06 00:57:49.728 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 00:57:49.728 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 00:57:49.729 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 00:57:49.731 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 00:57:49.784 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 4b4d3d2cde534ac0d30f3a0358bf4f32c135728dbffed559ee695911c3547f80
2025-02-06 00:57:49.904 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49353/hhplus using query 'SELECT 1'
2025-02-06 00:57:56.994 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.263254S
2025-02-06 00:57:56.995 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49353/hhplus)
2025-02-06 00:57:56.995 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 00:57:57.022 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: c956f5b22346c43fcc59828c4e019a9735c72cbb0220865e2dcd6187af83958e
2025-02-06 00:57:57.241 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.245298S
2025-02-06 00:57:57.630 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 00:57:57.671 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 00:57:57.698 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 00:57:57.879 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 00:57:57.899 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 00:57:58.004 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@5eea1511
2025-02-06 00:57:58.005 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 00:57:58.033 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 00:57:58.033 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 00:57:58.045 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 00:57:58.649 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 00:57:58.780 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 00:57:58.984 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 00:57:59.437 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 00:57:59.757 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 00:57:59.845 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49416
2025-02-06 00:57:59.873 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49416
2025-02-06 00:58:00.379 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 00:58:00.805 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 00:58:00.805 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 00:58:00.809 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 00:58:00.818 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 13 ms
2025-02-06 00:58:00.923 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.405 seconds (process running for 19.45)
2025-02-06 00:58:04.377 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 00:58:04.381 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 00:58:04.385 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 01:04:34.724 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 01:04:34.849 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 01:04:35.185 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1282 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 01:04:35.186 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-06 01:04:35.689 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:04:35.689 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 01:04:35.707 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
2025-02-06 01:04:35.711 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:04:35.712 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 01:04:35.934 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 220 ms. Found 9 JPA repository interfaces.
2025-02-06 01:04:36.255 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:04:36.256 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 01:04:36.271 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.272 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.272 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.272 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.272 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.272 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.273 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.273 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.273 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:04:36.273 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 01:04:36.406 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 01:04:36.409 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 01:04:36.414 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 01:04:36.589 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 01:04:36.760 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 01:04:36.761 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 01:04:36.767 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 01:04:36.780 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 01:04:36.887 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 01:04:38.269 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 0ede2319a01db6da40324c71db29cd6b3d57facd0f26c8dbeaad84b5a1f42743
2025-02-06 01:04:39.004 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.223907S
2025-02-06 01:04:39.007 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 01:04:39.008 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 01:04:39.008 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 01:04:39.011 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 01:04:39.067 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: c8e06ab00ae5391a130c6e2e38aee09dd08da385e931ec52817e129d6cd41eaa
2025-02-06 01:04:39.243 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49482/hhplus using query 'SELECT 1'
2025-02-06 01:04:46.267 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.2563S
2025-02-06 01:04:46.267 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49482/hhplus)
2025-02-06 01:04:46.268 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 01:04:46.296 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 40537f90cb9704392d1b609a92e1603c399f7fdc77f1a5abee968fdd230f4b9c
2025-02-06 01:04:46.519 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.250883S
2025-02-06 01:04:46.897 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 01:04:46.940 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 01:04:46.963 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 01:04:47.152 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 01:04:47.171 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 01:04:47.254 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6a95fa85
2025-02-06 01:04:47.255 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 01:04:47.281 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 01:04:47.282 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 01:04:47.293 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 01:04:47.908 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 01:04:48.037 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 01:04:48.223 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 01:04:48.682 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 01:04:48.980 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 01:04:49.066 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49546
2025-02-06 01:04:49.092 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49546
2025-02-06 01:04:49.583 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 01:04:50.003 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 01:04:50.003 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 01:04:50.007 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 01:04:50.015 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-06 01:04:50.117 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 15.157 seconds (process running for 21.218)
2025-02-06 01:04:53.576 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 01:04:53.577 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 01:04:53.580 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 01:09:23.267 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 01:09:23.391 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 01:09:23.760 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 1359 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 01:09:23.760 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-06 01:09:24.228 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:09:24.229 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 01:09:24.248 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-06 01:09:24.250 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:09:24.250 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 01:09:24.439 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 187 ms. Found 9 JPA repository interfaces.
2025-02-06 01:09:24.747 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 01:09:24.748 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 01:09:24.764 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.765 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.766 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 01:09:24.766 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 01:09:24.900 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 01:09:24.903 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 01:09:24.918 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 01:09:25.086 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 01:09:25.263 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 01:09:25.264 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 01:09:25.278 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 01:09:25.316 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 01:09:25.427 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 01:09:25.503 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: f410bf0037b7c7343857fcfcd36225cf6cc12e04c17e79e4440459bf9ac3bac6
2025-02-06 01:09:25.687 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.371071S
2025-02-06 01:09:25.690 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 01:09:25.691 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 01:09:25.691 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 01:09:25.693 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 01:09:25.752 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: bab79cefca8aa6b8f07c3bda3fe9baa071ef58bdc889c72f7de081e4fcce7671
2025-02-06 01:09:25.865 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49608/hhplus using query 'SELECT 1'
2025-02-06 01:09:32.847 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.153035S
2025-02-06 01:09:32.847 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49608/hhplus)
2025-02-06 01:09:32.848 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 01:09:32.873 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 9de01acd729ee605449eceaedb65adbfd9ed0b107d3fa3b6dd18ce6c1ab15aec
2025-02-06 01:09:33.034 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.185658S
2025-02-06 01:09:33.467 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 01:09:33.510 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 01:09:33.532 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 01:09:33.718 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 01:09:33.740 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 01:09:33.827 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@74f86856
2025-02-06 01:09:33.828 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 01:09:33.852 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 01:09:33.853 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 01:09:33.864 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 01:09:34.480 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 01:09:34.607 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 01:09:34.877 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 01:09:35.342 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 01:09:35.650 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 01:09:35.747 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49670
2025-02-06 01:09:35.773 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49670
2025-02-06 01:09:36.267 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 01:09:36.670 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 01:09:36.671 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 01:09:36.675 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 01:09:36.681 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 10 ms
2025-02-06 01:09:36.789 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 13.258 seconds (process running for 19.348)
2025-02-06 01:09:40.184 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 01:09:40.188 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 01:09:40.196 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 05:20:53.198 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:20:53.319 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 05:20:53.653 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Starting CouponUseCaseTest using Java 17.0.14 with PID 2295 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 05:20:53.654 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - The following 1 profile is active: "test"
2025-02-06 05:20:54.105 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:20:54.106 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:20:54.115 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-06 05:20:54.117 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:20:54.117 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:20:54.304 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 186 ms. Found 9 JPA repository interfaces.
2025-02-06 05:20:54.610 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:20:54.611 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 05:20:54.626 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.626 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.626 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.627 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:20:54.628 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 05:20:54.780 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 05:20:54.783 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 05:20:54.799 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 05:20:54.966 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 05:20:55.139 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 05:20:55.140 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 05:20:55.146 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 05:20:55.159 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 05:20:55.270 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 05:20:56.731 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: a2ce720c17744d56356eb1eff7f2a4226f48fd27fef5c4a1ce9fa7b79f555f4d
2025-02-06 05:20:57.388 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.229282S
2025-02-06 05:20:57.392 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 05:20:57.392 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 05:20:57.393 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 05:20:57.395 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 05:20:57.462 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 2535c3e8dbc62579326c83f1513be6bb33773882e15160798f276d9c03f85437
2025-02-06 05:20:57.582 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49825/hhplus using query 'SELECT 1'
2025-02-06 05:21:05.759 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT8.364158S
2025-02-06 05:21:05.760 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49825/hhplus)
2025-02-06 05:21:05.761 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 05:21:05.794 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 2079615da9a908fed4cd856c44079dafb926d3bf9097669d96439c2c00640b11
2025-02-06 05:21:06.025 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.264318S
2025-02-06 05:21:06.428 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:21:06.472 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 05:21:06.501 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:21:06.726 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:21:06.749 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 05:21:06.863 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@6d86873a
2025-02-06 05:21:06.864 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 05:21:06.890 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 05:21:06.891 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 05:21:06.902 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:21:07.567 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:21:07.713 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:21:07.949 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:21:08.394 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 05:21:08.691 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 05:21:08.783 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:49898
2025-02-06 05:21:08.807 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:49898
2025-02-06 05:21:09.311 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 05:21:09.733 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 05:21:09.733 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 05:21:09.737 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 05:21:09.748 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 15 ms
2025-02-06 05:21:09.853 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseTest - Started CouponUseCaseTest in 16.431 seconds (process running for 22.539)
2025-02-06 05:21:13.511 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:21:13.518 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 05:21:13.525 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 05:33:58.295 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest]: CouponUseCaseConcurrencyFOFSTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:33:58.430 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest
2025-02-06 05:33:58.745 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Starting CouponUseCaseConcurrencyFOFSTest using Java 17.0.14 with PID 2415 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 05:33:58.746 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - The following 1 profile is active: "test"
2025-02-06 05:33:59.155 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:33:59.156 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:33:59.176 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
2025-02-06 05:33:59.178 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:33:59.178 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:33:59.346 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 166 ms. Found 9 JPA repository interfaces.
2025-02-06 05:33:59.633 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:33:59.635 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 05:33:59.652 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.653 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.653 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.653 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.653 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.653 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.654 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.654 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.654 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:33:59.654 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-02-06 05:33:59.784 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 05:33:59.787 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 05:33:59.802 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 05:33:59.970 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 05:34:00.140 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 05:34:00.141 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 05:34:00.147 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 05:34:00.161 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 05:34:00.268 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 05:34:01.685 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 862d8d7c2ddf1990bbd50cc6be509132a6611b3d351d61e00a6d238b25994164
2025-02-06 05:34:02.408 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.247171S
2025-02-06 05:34:02.413 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 05:34:02.413 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 05:34:02.414 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 05:34:02.417 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 05:34:02.473 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: f2b86d9021c5d62c967a2fc996affeea7817c8ca9a22b1ea613a8a3741068967
2025-02-06 05:34:02.653 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:49962/hhplus using query 'SELECT 1'
2025-02-06 05:34:09.758 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.340785S
2025-02-06 05:34:09.758 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:49962/hhplus)
2025-02-06 05:34:09.759 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 05:34:09.789 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 74ed861dcf04f1828115c4d2c92c97871c651ed053248014b1313049e31c16df
2025-02-06 05:34:10.005 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.245554S
2025-02-06 05:34:10.334 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:34:10.367 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 05:34:10.386 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:34:10.558 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:34:10.576 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 05:34:10.660 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@782d2e29
2025-02-06 05:34:10.661 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 05:34:10.683 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 05:34:10.684 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 05:34:10.694 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:34:11.270 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:34:11.396 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:34:11.605 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:34:12.022 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 05:34:12.301 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 05:34:12.386 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50026
2025-02-06 05:34:12.413 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50026
2025-02-06 05:34:12.886 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 05:34:13.283 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 05:34:13.283 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 05:34:13.287 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 05:34:13.295 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 11 ms
2025-02-06 05:34:13.397 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Started CouponUseCaseConcurrencyFOFSTest in 14.872 seconds (process running for 20.944)
2025-02-06 05:34:14.175 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseTest]: CouponUseCaseTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:34:14.180 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseTest
2025-02-06 05:34:14.627 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyFOFSIntegrationTest]: OrderFacadeConcurrencyFOFSIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:34:14.630 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyFOFSIntegrationTest
2025-02-06 05:34:15.059 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest]: OrderFacadeConcurrencyIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:34:15.062 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeConcurrencyIntegrationTest
2025-02-06 05:34:15.402 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.OrderFacadeIntegrationTest]: OrderFacadeIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:34:15.405 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.OrderFacadeIntegrationTest
2025-02-06 05:34:15.559 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.SalesStatsIntegrationTest]: SalesStatsIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:34:15.561 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.SalesStatsIntegrationTest
2025-02-06 05:34:19.218 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:34:19.220 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 05:34:19.226 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 05:51:40.308 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest]: CouponUseCaseConcurrencyFOFSTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:51:40.427 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest
2025-02-06 05:51:40.760 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Starting CouponUseCaseConcurrencyFOFSTest using Java 17.0.14 with PID 2490 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 05:51:40.761 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - The following 1 profile is active: "test"
2025-02-06 05:51:41.181 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:51:41.182 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:51:41.200 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-06 05:51:41.201 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:51:41.202 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:51:41.383 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 180 ms. Found 9 JPA repository interfaces.
2025-02-06 05:51:41.669 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:51:41.670 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 05:51:41.684 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.684 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.684 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.684 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:51:41.685 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 05:51:41.828 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 05:51:41.831 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 05:51:41.838 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 05:51:42.004 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 05:51:42.169 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 05:51:42.170 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 05:51:42.177 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 05:51:42.192 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 05:51:42.294 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 05:51:43.717 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 012d57be42e9d80f61eb0f18f3bf33d9e64c39add3ea92e7411b9052dd818ec9
2025-02-06 05:51:44.455 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT2.263096S
2025-02-06 05:51:44.460 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 05:51:44.460 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 05:51:44.460 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 05:51:44.462 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 05:51:44.525 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: caf4cc42cfad00e4973342c0a3db89d2fc38fa43c581c289b68d97ca69a7cdfc
2025-02-06 05:51:44.658 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50089/hhplus using query 'SELECT 1'
2025-02-06 05:51:51.877 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.415027S
2025-02-06 05:51:51.878 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50089/hhplus)
2025-02-06 05:51:51.879 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 05:51:51.907 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: 7c5353119c07264dff2d252b99b0f15ca56a723bc3ca650700796184d66d0f58
2025-02-06 05:51:52.117 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.238189S
2025-02-06 05:51:52.511 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:51:52.559 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 05:51:52.583 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:51:52.791 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:51:52.815 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 05:51:52.914 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e85c7c4
2025-02-06 05:51:52.915 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 05:51:52.935 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 05:51:52.936 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 05:51:52.947 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:51:53.516 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:51:53.636 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:51:53.840 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:51:54.287 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 05:51:54.573 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 05:51:54.660 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50155
2025-02-06 05:51:54.688 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50155
2025-02-06 05:51:55.142 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 05:51:55.555 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 05:51:55.555 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 05:51:55.559 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 05:51:55.574 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 18 ms
2025-02-06 05:51:55.664 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Started CouponUseCaseConcurrencyFOFSTest in 15.125 seconds (process running for 21.154)
2025-02-06 05:51:59.009 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:51:59.011 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 05:51:59.014 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
2025-02-06 05:54:08.517 [Test worker]  INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest]: CouponUseCaseConcurrencyFOFSTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-02-06 05:54:08.646 [Test worker]  INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration kr.hhplus.be.server.ServerApplication for test class kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest
2025-02-06 05:54:08.986 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Starting CouponUseCaseConcurrencyFOFSTest using Java 17.0.14 with PID 2545 (started by seongdo in /Users/seongdo/Desktop/hhplus_week3/server-java)
2025-02-06 05:54:08.987 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - The following 1 profile is active: "test"
2025-02-06 05:54:09.416 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:54:09.416 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:54:09.434 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2025-02-06 05:54:09.436 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:54:09.436 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-06 05:54:09.643 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 206 ms. Found 9 JPA repository interfaces.
2025-02-06 05:54:09.951 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-02-06 05:54:09.952 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-02-06 05:54:09.967 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.CouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.968 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.coupon.infrastructure.UserCouponJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.968 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderItemJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.968 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.order.infrastructure.OrderJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.968 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.payment.infrastructure.PaymentJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.968 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.product.infrastructure.ProductJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.stats.infrastructure.SalesStatsJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface kr.hhplus.be.server.apps.user.infrastructure.UserPointJpaRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-02-06 05:54:09.969 [Test worker]  INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-02-06 05:54:10.104 [Test worker]  INFO org.testcontainers.images.PullPolicy - Image pull policy will be performed by: DefaultPullPolicy()
2025-02-06 05:54:10.107 [Test worker]  INFO org.testcontainers.utility.ImageNameSubstitutor - Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2025-02-06 05:54:10.122 [Test worker]  INFO org.testcontainers.DockerClientFactory - Testcontainers version: 1.20.4
2025-02-06 05:54:10.289 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Loaded org.testcontainers.dockerclient.UnixSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2025-02-06 05:54:10.462 [Test worker]  INFO org.testcontainers.dockerclient.DockerClientProviderStrategy - Found Docker environment with local Unix socket (unix:///var/run/docker.sock)
2025-02-06 05:54:10.463 [Test worker]  INFO org.testcontainers.DockerClientFactory - Docker host IP address is localhost
2025-02-06 05:54:10.477 [Test worker]  INFO org.testcontainers.DockerClientFactory - Connected to docker: 
  Server Version: 27.4.0
  API Version: 1.47
  Operating System: Docker Desktop
  Total Memory: 7837 MB
  Labels: 
    com.docker.desktop.address=unix:///Users/seongdo/Library/Containers/com.docker.docker/Data/docker-cli.sock
2025-02-06 05:54:10.495 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Creating container for image: testcontainers/ryuk:0.11.0
2025-02-06 05:54:10.600 [Test worker]  INFO org.testcontainers.utility.RegistryAuthLocator - Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2025-02-06 05:54:10.672 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 is starting: 915947e2010b715c9f87084a40e9c9bcb67def87f9524dbd1c42c6c9ec9aa826
2025-02-06 05:54:10.854 [Test worker]  INFO tc.testcontainers/ryuk:0.11.0 - Container testcontainers/ryuk:0.11.0 started in PT0.359763S
2025-02-06 05:54:10.858 [Test worker]  INFO org.testcontainers.utility.RyukResourceReaper - Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2025-02-06 05:54:10.858 [Test worker]  INFO org.testcontainers.DockerClientFactory - Checking the system...
2025-02-06 05:54:10.858 [Test worker]  INFO org.testcontainers.DockerClientFactory - ✔︎ Docker server version should be at least 1.6.0
2025-02-06 05:54:10.861 [Test worker]  INFO tc.mysql:8.0 - Creating container for image: mysql:8.0
2025-02-06 05:54:10.926 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 is starting: 7ed724d8e88a69bf23a0755c3913cdb6547e5d2126b24bade20c34155fc04da8
2025-02-06 05:54:11.048 [Test worker]  INFO tc.mysql:8.0 - Waiting for database connection to become available at jdbc:mysql://localhost:50203/hhplus using query 'SELECT 1'
2025-02-06 05:54:17.912 [Test worker]  INFO tc.mysql:8.0 - Container mysql:8.0 started in PT7.05177S
2025-02-06 05:54:17.913 [Test worker]  INFO tc.mysql:8.0 - Container is started (JDBC URL: jdbc:mysql://localhost:50203/hhplus)
2025-02-06 05:54:17.914 [Test worker]  INFO tc.redis:7.4.2 - Creating container for image: redis:7.4.2
2025-02-06 05:54:17.940 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 is starting: cfad2b2d15fd096f8c065520984e6a16d3b9b8432e0184bc4f544aac46232d57
2025-02-06 05:54:18.113 [Test worker]  INFO tc.redis:7.4.2 - Container redis:7.4.2 started in PT0.198926S
2025-02-06 05:54:18.489 [Test worker]  INFO org.hibernate.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-06 05:54:18.527 [Test worker]  INFO org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.4.Final
2025-02-06 05:54:18.547 [Test worker]  INFO org.hibernate.cache.internal.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-06 05:54:18.723 [Test worker]  INFO org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-06 05:54:18.743 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Starting...
2025-02-06 05:54:18.849 [Test worker]  INFO com.zaxxer.hikari.pool.HikariPool - HangHaePlusDataSource - Added connection com.mysql.cj.jdbc.ConnectionImpl@52916723
2025-02-06 05:54:18.851 [Test worker]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Start completed.
2025-02-06 05:54:18.876 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-02-06 05:54:18.877 [Test worker]  WARN org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-02-06 05:54:18.888 [Test worker]  INFO org.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HangHaePlusDataSource)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-06 05:54:19.530 [Test worker]  INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-06 05:54:19.661 [Test worker]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:54:19.876 [Test worker]  INFO org.springframework.data.jpa.repository.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-06 05:54:20.284 [Test worker] ERROR io.netty.resolver.dns.DnsServerAddressStreamProviders - Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
2025-02-06 05:54:20.580 [Test worker]  INFO org.redisson.Version - Redisson 3.17.6
2025-02-06 05:54:20.665 [redisson-netty-4-6]  INFO org.redisson.connection.pool.MasterPubSubConnectionPool - 1 connections initialized for localhost/127.0.0.1:50264
2025-02-06 05:54:20.690 [redisson-netty-4-20]  INFO org.redisson.connection.pool.MasterConnectionPool - 24 connections initialized for localhost/127.0.0.1:50264
2025-02-06 05:54:21.190 [Test worker]  INFO org.springframework.validation.beanvalidation.OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
2025-02-06 05:54:21.617 [Test worker]  INFO org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-02-06 05:54:21.618 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''
2025-02-06 05:54:21.622 [Test worker]  INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-02-06 05:54:21.630 [Test worker]  INFO org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 12 ms
2025-02-06 05:54:21.734 [Test worker]  INFO kr.hhplus.be.server.integration.CouponUseCaseConcurrencyFOFSTest - Started CouponUseCaseConcurrencyFOFSTest in 12.987 seconds (process running for 19.067)
2025-02-06 05:54:25.317 [SpringApplicationShutdownHook]  INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-06 05:54:25.319 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown initiated...
2025-02-06 05:54:25.321 [SpringApplicationShutdownHook]  INFO com.zaxxer.hikari.HikariDataSource - HangHaePlusDataSource - Shutdown completed.
